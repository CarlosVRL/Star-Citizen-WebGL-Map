/*!
 * starcitizen-webgl-map v0.2.0 by Lianna Eeftinck
 * Copyright 2014 Lianna Eeftinck
 * https://github.com/Leeft/Star-Citizen-WebGL-Map
 * Licensed under http://opensource.org/licenses/MIT
 */
if (typeof jQuery === "undefined") { throw new Error("starcitizen-webgl-map requires jQuery"); }
if (typeof THREE === "undefined") { throw new Error("starcitizen-webgl-map requires THREE.js"); }
function _build_selected_system_object(){var a=(new THREE.JSONLoader).parse({metadata:{formatVersion:3.1,sourceFile:"selected_system.obj",generatedBy:"OBJConverter",vertices:248,faces:248,normals:960,colors:0,uvs:0,materials:1},scale:1,vertices:[-.5,.5,.5,-.52,.2,.5,-.52,.2,.44,-.52,.44,.44,-.52,.5,.5,-.5,.52,.5,-.5,.5,.52,-.52,.44,.2,-.52,.5,.2,-.5,.52,.2,-.44,.52,.2,-.44,.52,.44,-.44,.44,.52,-.5,.2,.52,-.44,.2,.52,-.2,.52,.44,-.2,.52,.5,-.2,.5,.52,-.2,.44,.52,-.5,.44,.2,-.5,.5,.2,-.44,.5,.2,-.2,.44,.5,-.2,.5,.44,-.2,.5,.5,-.5,.44,.44,-.44,.44,.5,-.44,.5,.44,-.5,.2,.5,-.5,.2,.44,-.44,.2,.5,.5,.5,.5,.52,.2,.5,.52,.2,.44,.52,.44,.44,.52,.5,.5,.5,.52,.5,.5,.5,.52,.52,.44,.2,.52,.5,.2,.5,.52,.2,.44,.52,.2,.44,.52,.44,.44,.44,.52,.5,.2,.52,.44,.2,.52,.2,.52,.44,.2,.52,.5,.2,.5,.52,.2,.44,.52,.5,.44,.2,.5,.5,.2,.44,.5,.2,.2,.44,.5,.2,.5,.44,.2,.5,.5,.5,.44,.44,.44,.44,.5,.44,.5,.44,.5,.2,.5,.5,.2,.44,.44,.2,.5,-.5,-.5,.5,-.52,-.2,.5,-.52,-.2,.44,-.52,-.44,.44,-.52,-.5,.5,-.5,-.52,.5,-.5,-.5,.52,-.52,-.44,.2,-.52,-.5,.2,-.5,-.52,.2,-.44,-.52,.2,-.44,-.52,.44,-.44,-.44,.52,-.5,-.2,.52,-.44,-.2,.52,-.2,-.52,.44,-.2,-.52,.5,-.2,-.5,.52,-.2,-.44,.52,-.5,-.44,.2,-.5,-.5,.2,-.44,-.5,.2,-.2,-.44,.5,-.2,-.5,.44,-.2,-.5,.5,-.5,-.44,.44,-.44,-.44,.5,-.44,-.5,.44,-.5,-.2,.5,-.5,-.2,.44,-.44,-.2,.5,.5,-.5,.5,.52,-.2,.5,.52,-.2,.44,.52,-.44,.44,.52,-.5,.5,.5,-.52,.5,.5,-.5,.52,.52,-.44,.2,.52,-.5,.2,.5,-.52,.2,.44,-.52,.2,.44,-.52,.44,.44,-.44,.52,.5,-.2,.52,.44,-.2,.52,.2,-.52,.44,.2,-.52,.5,.2,-.5,.52,.2,-.44,.52,.5,-.44,.2,.5,-.5,.2,.44,-.5,.2,.2,-.44,.5,.2,-.5,.44,.2,-.5,.5,.5,-.44,.44,.44,-.44,.5,.44,-.5,.44,.5,-.2,.5,.5,-.2,.44,.44,-.2,.5,-.5,.5,-.5,-.52,.2,-.5,-.52,.2,-.44,-.52,.44,-.44,-.52,.5,-.5,-.5,.52,-.5,-.5,.5,-.52,-.52,.44,-.2,-.52,.5,-.2,-.5,.52,-.2,-.44,.52,-.2,-.44,.52,-.44,-.44,.44,-.52,-.5,.2,-.52,-.44,.2,-.52,-.2,.52,-.44,-.2,.52,-.5,-.2,.5,-.52,-.2,.44,-.52,-.5,.44,-.2,-.5,.5,-.2,-.44,.5,-.2,-.2,.44,-.5,-.2,.5,-.44,-.2,.5,-.5,-.5,.44,-.44,-.44,.44,-.5,-.44,.5,-.44,-.5,.2,-.5,-.5,.2,-.44,-.44,.2,-.5,.5,.5,-.5,.52,.2,-.5,.52,.2,-.44,.52,.44,-.44,.52,.5,-.5,.5,.52,-.5,.5,.5,-.52,.52,.44,-.2,.52,.5,-.2,.5,.52,-.2,.44,.52,-.2,.44,.52,-.44,.44,.44,-.52,.5,.2,-.52,.44,.2,-.52,.2,.52,-.44,.2,.52,-.5,.2,.5,-.52,.2,.44,-.52,.5,.44,-.2,.5,.5,-.2,.44,.5,-.2,.2,.44,-.5,.2,.5,-.44,.2,.5,-.5,.5,.44,-.44,.44,.44,-.5,.44,.5,-.44,.5,.2,-.5,.5,.2,-.44,.44,.2,-.5,-.5,-.5,-.5,-.52,-.2,-.5,-.52,-.2,-.44,-.52,-.44,-.44,-.52,-.5,-.5,-.5,-.52,-.5,-.5,-.5,-.52,-.52,-.44,-.2,-.52,-.5,-.2,-.5,-.52,-.2,-.44,-.52,-.2,-.44,-.52,-.44,-.44,-.44,-.52,-.5,-.2,-.52,-.44,-.2,-.52,-.2,-.52,-.44,-.2,-.52,-.5,-.2,-.5,-.52,-.2,-.44,-.52,-.5,-.44,-.2,-.5,-.5,-.2,-.44,-.5,-.2,-.2,-.44,-.5,-.2,-.5,-.44,-.2,-.5,-.5,-.5,-.44,-.44,-.44,-.44,-.5,-.44,-.5,-.44,-.5,-.2,-.5,-.5,-.2,-.44,-.44,-.2,-.5,.5,-.5,-.5,.52,-.2,-.5,.52,-.2,-.44,.52,-.44,-.44,.52,-.5,-.5,.5,-.52,-.5,.5,-.5,-.52,.52,-.44,-.2,.52,-.5,-.2,.5,-.52,-.2,.44,-.52,-.2,.44,-.52,-.44,.44,-.44,-.52,.5,-.2,-.52,.44,-.2,-.52,.2,-.52,-.44,.2,-.52,-.5,.2,-.5,-.52,.2,-.44,-.52,.5,-.44,-.2,.5,-.5,-.2,.44,-.5,-.2,.2,-.44,-.5,.2,-.5,-.44,.2,-.5,-.5,.5,-.44,-.44,.44,-.44,-.5,.44,-.5,-.44,.5,-.2,-.5,.5,-.2,-.44,.44,-.2,-.5],morphTargets:[],morphColors:[],normals:[-.25969,.62694,-.73451,-.62694,.25969,-.73451,-.91018,.29289,.29289,-.29289,.91018,.29289,-.62694,-.73451,.25969,-.25969,-.73451,.62694,-.29289,.29289,.91018,-.91018,.29289,.29289,.73451,.25969,.62694,.73451,.62694,.25969,-.29289,.91018,.29289,-.29289,.29289,.91018,-.29289,.29289,.91018,-.29289,.91018,.29289,-.91018,.29289,.29289,.57735,-.57735,-.57735,.57735,-.57735,.57735,.40825,-.40825,.8165,.40825,-.40825,-.8165,.57735,-.57735,.57735,.57735,-.57735,-.57735,.40825,-.40825,-.8165,.40825,-.40825,.8165,.57735,.57735,-.57735,.57735,-.57735,-.57735,.40825,-.8165,-.40825,.40825,.8165,-.40825,.57735,-.57735,-.57735,.57735,.57735,-.57735,.40825,.8165,-.40825,.40825,-.8165,-.40825,-.57735,-.57735,-.57735,.57735,-.57735,-.57735,.8165,-.40825,-.40825,-.8165,-.40825,-.40825,.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.8165,-.40825,-.40825,.8165,-.40825,-.40825,.57735,-.57735,.57735,.40825,-.40825,.8165,-.29289,.29289,.91018,-.25969,-.73451,.62694,.40825,-.40825,.8165,.57735,-.57735,.57735,.73451,.25969,.62694,-.29289,.29289,.91018,-.91018,.29289,.29289,-.8165,-.40825,-.40825,-.57735,-.57735,-.57735,-.62694,-.73451,.25969,-.57735,-.57735,-.57735,-.8165,-.40825,-.40825,-.91018,.29289,.29289,-.62694,.25969,-.73451,.40825,.8165,-.40825,.57735,.57735,-.57735,-.25969,.62694,-.73451,-.29289,.91018,.29289,.57735,.57735,-.57735,.40825,.8165,-.40825,-.29289,.91018,.29289,.73451,.62694,.25969,.57735,-.57735,-.57735,.8165,-.40825,-.40825,.57735,-.57735,-.57735,.30151,-.90453,-.30151,.8165,-.40825,-.40825,.57735,-.57735,-.57735,.30151,-.30151,-.90453,.57735,-.57735,-.57735,.57735,-.57735,-.57735,.40825,-.8165,-.40825,.57735,-.57735,-.57735,.30151,-.30151,-.90453,.57735,-.57735,-.57735,.40825,-.8165,-.40825,.57735,-.57735,-.57735,.90453,-.30151,-.30151,.40825,-.40825,-.8165,.57735,-.57735,-.57735,.30151,-.90453,-.30151,.57735,-.57735,-.57735,.57735,-.57735,-.57735,.40825,-.40825,-.8165,.57735,-.57735,-.57735,.90453,-.30151,-.30151,.57735,-.57735,-.57735,.90453,-.30151,-.30151,.73451,.25969,.62694,.57735,-.57735,.57735,.90453,-.30151,-.30151,.73451,.62694,.25969,.73451,.25969,.62694,.57735,-.57735,-.57735,.57735,.57735,-.57735,.73451,.62694,.25969,.90453,-.30151,-.30151,-.62694,.25969,-.73451,-.25969,.62694,-.73451,.30151,-.30151,-.90453,-.62694,.25969,-.73451,.30151,-.30151,-.90453,.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.62694,-.73451,.25969,-.57735,-.57735,-.57735,.57735,-.57735,-.57735,.30151,-.90453,-.30151,-.62694,-.73451,.25969,.30151,-.90453,-.30151,-.25969,-.73451,.62694,.30151,-.30151,-.90453,-.25969,.62694,-.73451,.57735,.57735,-.57735,.57735,-.57735,-.57735,-.25969,-.73451,.62694,.30151,-.90453,-.30151,.57735,-.57735,-.57735,.57735,-.57735,.57735,.91018,.29289,.29289,.62694,.25969,-.73451,.25969,.62694,-.73451,.29289,.91018,.29289,.29289,.29289,.91018,.25969,-.73451,.62694,.62694,-.73451,.25969,.91018,.29289,.29289,.29289,.91018,.29289,-.73451,.62694,.25969,-.73451,.25969,.62694,.29289,.29289,.91018,.29289,.91018,.29289,.29289,.29289,.91018,.91018,.29289,.29289,-.40825,-.40825,.8165,-.57735,-.57735,.57735,-.57735,-.57735,-.57735,-.40825,-.40825,-.8165,-.40825,-.40825,-.8165,-.57735,-.57735,-.57735,-.57735,-.57735,.57735,-.40825,-.40825,.8165,-.40825,-.8165,-.40825,-.57735,-.57735,-.57735,-.57735,.57735,-.57735,-.40825,.8165,-.40825,-.40825,.8165,-.40825,-.57735,.57735,-.57735,-.57735,-.57735,-.57735,-.40825,-.8165,-.40825,-.8165,-.40825,-.40825,-.57735,-.57735,-.57735,.57735,-.57735,-.57735,.8165,-.40825,-.40825,.8165,-.40825,-.40825,.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.8165,-.40825,-.40825,.29289,.29289,.91018,-.40825,-.40825,.8165,-.57735,-.57735,.57735,.25969,-.73451,.62694,-.73451,.25969,.62694,-.57735,-.57735,.57735,-.40825,-.40825,.8165,.29289,.29289,.91018,.57735,-.57735,-.57735,.8165,-.40825,-.40825,.91018,.29289,.29289,.62694,-.73451,.25969,.91018,.29289,.29289,.8165,-.40825,-.40825,.57735,-.57735,-.57735,.62694,.25969,-.73451,.25969,.62694,-.73451,-.57735,.57735,-.57735,-.40825,.8165,-.40825,.29289,.91018,.29289,.29289,.91018,.29289,-.40825,.8165,-.40825,-.57735,.57735,-.57735,-.73451,.62694,.25969,-.57735,-.57735,-.57735,-.8165,-.40825,-.40825,-.57735,-.57735,-.57735,-.30151,-.90453,-.30151,-.30151,-.30151,-.90453,-.57735,-.57735,-.57735,-.8165,-.40825,-.40825,-.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.40825,-.8165,-.40825,-.57735,-.57735,-.57735,-.30151,-.30151,-.90453,-.57735,-.57735,-.57735,-.40825,-.8165,-.40825,-.57735,-.57735,-.57735,-.90453,-.30151,-.30151,-.30151,-.90453,-.30151,-.57735,-.57735,-.57735,-.40825,-.40825,-.8165,-.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.40825,-.40825,-.8165,-.57735,-.57735,-.57735,-.90453,-.30151,-.30151,-.73451,.25969,.62694,-.90453,-.30151,-.30151,-.57735,-.57735,-.57735,-.57735,-.57735,.57735,-.73451,.62694,.25969,-.90453,-.30151,-.30151,-.73451,.25969,.62694,-.73451,.62694,.25969,-.57735,.57735,-.57735,-.57735,-.57735,-.57735,-.90453,-.30151,-.30151,.25969,.62694,-.73451,.62694,.25969,-.73451,-.30151,-.30151,-.90453,-.57735,-.57735,-.57735,-.30151,-.30151,-.90453,.62694,.25969,-.73451,.57735,-.57735,-.57735,-.57735,-.57735,-.57735,.57735,-.57735,-.57735,.62694,-.73451,.25969,-.30151,-.90453,-.30151,-.30151,-.90453,-.30151,.62694,-.73451,.25969,.25969,-.73451,.62694,-.57735,.57735,-.57735,.25969,.62694,-.73451,-.30151,-.30151,-.90453,-.57735,-.57735,-.57735,-.57735,-.57735,-.57735,-.30151,-.90453,-.30151,.25969,-.73451,.62694,-.57735,-.57735,.57735,-.91018,-.29289,.29289,-.62694,-.25969,-.73451,-.25969,-.62694,-.73451,-.29289,-.91018,.29289,-.29289,-.29289,.91018,-.25969,.73451,.62694,-.62694,.73451,.25969,-.91018,-.29289,.29289,-.29289,-.91018,.29289,.73451,-.62694,.25969,.73451,-.25969,.62694,-.29289,-.29289,.91018,-.29289,-.91018,.29289,-.29289,-.29289,.91018,-.91018,-.29289,.29289,.40825,.40825,.8165,.57735,.57735,.57735,.57735,.57735,-.57735,.40825,.40825,-.8165,.40825,.40825,-.8165,.57735,.57735,-.57735,.57735,.57735,.57735,.40825,.40825,.8165,.40825,.8165,-.40825,.57735,.57735,-.57735,.57735,-.57735,-.57735,.40825,-.8165,-.40825,.40825,-.8165,-.40825,.57735,-.57735,-.57735,.57735,.57735,-.57735,.40825,.8165,-.40825,.8165,.40825,-.40825,.57735,.57735,-.57735,-.57735,.57735,-.57735,-.8165,.40825,-.40825,-.8165,.40825,-.40825,-.57735,.57735,-.57735,.57735,.57735,-.57735,.8165,.40825,-.40825,-.29289,-.29289,.91018,.40825,.40825,.8165,.57735,.57735,.57735,-.25969,.73451,.62694,.73451,-.25969,.62694,.57735,.57735,.57735,.40825,.40825,.8165,-.29289,-.29289,.91018,-.57735,.57735,-.57735,-.8165,.40825,-.40825,-.91018,-.29289,.29289,-.62694,.73451,.25969,-.91018,-.29289,.29289,-.8165,.40825,-.40825,-.57735,.57735,-.57735,-.62694,-.25969,-.73451,-.25969,-.62694,-.73451,.57735,-.57735,-.57735,.40825,-.8165,-.40825,-.29289,-.91018,.29289,-.29289,-.91018,.29289,.40825,-.8165,-.40825,.57735,-.57735,-.57735,.73451,-.62694,.25969,.57735,.57735,-.57735,.8165,.40825,-.40825,.57735,.57735,-.57735,.30151,.90453,-.30151,.30151,.30151,-.90453,.57735,.57735,-.57735,.8165,.40825,-.40825,.57735,.57735,-.57735,.57735,.57735,-.57735,.40825,.8165,-.40825,.57735,.57735,-.57735,.30151,.30151,-.90453,.57735,.57735,-.57735,.40825,.8165,-.40825,.57735,.57735,-.57735,.90453,.30151,-.30151,.30151,.90453,-.30151,.57735,.57735,-.57735,.40825,.40825,-.8165,.57735,.57735,-.57735,.57735,.57735,-.57735,.40825,.40825,-.8165,.57735,.57735,-.57735,.90453,.30151,-.30151,.73451,-.25969,.62694,.90453,.30151,-.30151,.57735,.57735,-.57735,.57735,.57735,.57735,.73451,-.62694,.25969,.90453,.30151,-.30151,.73451,-.25969,.62694,.73451,-.62694,.25969,.57735,-.57735,-.57735,.57735,.57735,-.57735,.90453,.30151,-.30151,-.25969,-.62694,-.73451,-.62694,-.25969,-.73451,.30151,.30151,-.90453,.57735,.57735,-.57735,.30151,.30151,-.90453,-.62694,-.25969,-.73451,-.57735,.57735,-.57735,.57735,.57735,-.57735,-.57735,.57735,-.57735,-.62694,.73451,.25969,.30151,.90453,-.30151,.30151,.90453,-.30151,-.62694,.73451,.25969,-.25969,.73451,.62694,.57735,-.57735,-.57735,-.25969,-.62694,-.73451,.30151,.30151,-.90453,.57735,.57735,-.57735,.57735,.57735,-.57735,.30151,.90453,-.30151,-.25969,.73451,.62694,.57735,.57735,.57735,.25969,-.62694,-.73451,.62694,-.25969,-.73451,.91018,-.29289,.29289,.29289,-.91018,.29289,.62694,.73451,.25969,.25969,.73451,.62694,.29289,-.29289,.91018,.91018,-.29289,.29289,-.73451,-.25969,.62694,-.73451,-.62694,.25969,.29289,-.91018,.29289,.29289,-.29289,.91018,.29289,-.29289,.91018,.29289,-.91018,.29289,.91018,-.29289,.29289,-.57735,.57735,-.57735,-.57735,.57735,.57735,-.40825,.40825,.8165,-.40825,.40825,-.8165,-.57735,.57735,.57735,-.57735,.57735,-.57735,-.40825,.40825,-.8165,-.40825,.40825,.8165,-.57735,-.57735,-.57735,-.57735,.57735,-.57735,-.40825,.8165,-.40825,-.40825,-.8165,-.40825,-.57735,.57735,-.57735,-.57735,-.57735,-.57735,-.40825,-.8165,-.40825,-.40825,.8165,-.40825,.57735,.57735,-.57735,-.57735,.57735,-.57735,-.8165,.40825,-.40825,.8165,.40825,-.40825,-.57735,.57735,-.57735,.57735,.57735,-.57735,.8165,.40825,-.40825,-.8165,.40825,-.40825,-.57735,.57735,.57735,-.40825,.40825,.8165,.29289,-.29289,.91018,.25969,.73451,.62694,-.40825,.40825,.8165,-.57735,.57735,.57735,-.73451,-.25969,.62694,.29289,-.29289,.91018,.91018,-.29289,.29289,.8165,.40825,-.40825,.57735,.57735,-.57735,.62694,.73451,.25969,.57735,.57735,-.57735,.8165,.40825,-.40825,.91018,-.29289,.29289,.62694,-.25969,-.73451,-.40825,-.8165,-.40825,-.57735,-.57735,-.57735,.25969,-.62694,-.73451,.29289,-.91018,.29289,-.57735,-.57735,-.57735,-.40825,-.8165,-.40825,.29289,-.91018,.29289,-.73451,-.62694,.25969,-.57735,.57735,-.57735,-.8165,.40825,-.40825,-.57735,.57735,-.57735,-.30151,.90453,-.30151,-.8165,.40825,-.40825,-.57735,.57735,-.57735,-.30151,.30151,-.90453,-.57735,.57735,-.57735,-.57735,.57735,-.57735,-.40825,.8165,-.40825,-.57735,.57735,-.57735,-.30151,.30151,-.90453,-.57735,.57735,-.57735,-.40825,.8165,-.40825,-.57735,.57735,-.57735,-.90453,.30151,-.30151,-.40825,.40825,-.8165,-.57735,.57735,-.57735,-.30151,.90453,-.30151,-.57735,.57735,-.57735,-.57735,.57735,-.57735,-.40825,.40825,-.8165,-.57735,.57735,-.57735,-.90453,.30151,-.30151,-.57735,.57735,-.57735,-.90453,.30151,-.30151,-.73451,-.25969,.62694,-.57735,.57735,.57735,-.90453,.30151,-.30151,-.73451,-.62694,.25969,-.73451,-.25969,.62694,-.57735,.57735,-.57735,-.57735,-.57735,-.57735,-.73451,-.62694,.25969,-.90453,.30151,-.30151,.62694,-.25969,-.73451,.25969,-.62694,-.73451,-.30151,.30151,-.90453,.62694,-.25969,-.73451,-.30151,.30151,-.90453,-.57735,.57735,-.57735,.57735,.57735,-.57735,.62694,.73451,.25969,.57735,.57735,-.57735,-.57735,.57735,-.57735,-.30151,.90453,-.30151,.62694,.73451,.25969,-.30151,.90453,-.30151,.25969,.73451,.62694,-.30151,.30151,-.90453,.25969,-.62694,-.73451,-.57735,-.57735,-.57735,-.57735,.57735,-.57735,.25969,.73451,.62694,-.30151,.90453,-.30151,-.57735,.57735,-.57735,-.57735,.57735,.57735,-.91018,.29289,-.29289,-.62694,.25969,.73451,-.25969,.62694,.73451,-.29289,.91018,-.29289,-.29289,.29289,-.91018,-.25969,-.73451,-.62694,-.62694,-.73451,-.25969,-.91018,.29289,-.29289,-.29289,.91018,-.29289,.73451,.62694,-.25969,.73451,.25969,-.62694,-.29289,.29289,-.91018,-.29289,.91018,-.29289,-.29289,.29289,-.91018,-.91018,.29289,-.29289,.40825,-.40825,-.8165,.57735,-.57735,-.57735,.57735,-.57735,.57735,.40825,-.40825,.8165,.40825,-.40825,.8165,.57735,-.57735,.57735,.57735,-.57735,-.57735,.40825,-.40825,-.8165,.40825,-.8165,.40825,.57735,-.57735,.57735,.57735,.57735,.57735,.40825,.8165,.40825,.40825,.8165,.40825,.57735,.57735,.57735,.57735,-.57735,.57735,.40825,-.8165,.40825,.8165,-.40825,.40825,.57735,-.57735,.57735,-.57735,-.57735,.57735,-.8165,-.40825,.40825,-.8165,-.40825,.40825,-.57735,-.57735,.57735,.57735,-.57735,.57735,.8165,-.40825,.40825,-.29289,.29289,-.91018,.40825,-.40825,-.8165,.57735,-.57735,-.57735,-.25969,-.73451,-.62694,.73451,.25969,-.62694,.57735,-.57735,-.57735,.40825,-.40825,-.8165,-.29289,.29289,-.91018,-.57735,-.57735,.57735,-.8165,-.40825,.40825,-.91018,.29289,-.29289,-.62694,-.73451,-.25969,-.91018,.29289,-.29289,-.8165,-.40825,.40825,-.57735,-.57735,.57735,-.62694,.25969,.73451,-.25969,.62694,.73451,.57735,.57735,.57735,.40825,.8165,.40825,-.29289,.91018,-.29289,-.29289,.91018,-.29289,.40825,.8165,.40825,.57735,.57735,.57735,.73451,.62694,-.25969,.57735,-.57735,.57735,.8165,-.40825,.40825,.57735,-.57735,.57735,.30151,-.90453,.30151,.30151,-.30151,.90453,.57735,-.57735,.57735,.8165,-.40825,.40825,.57735,-.57735,.57735,.57735,-.57735,.57735,.40825,-.8165,.40825,.57735,-.57735,.57735,.30151,-.30151,.90453,.57735,-.57735,.57735,.40825,-.8165,.40825,.57735,-.57735,.57735,.90453,-.30151,.30151,.30151,-.90453,.30151,.57735,-.57735,.57735,.40825,-.40825,.8165,.57735,-.57735,.57735,.57735,-.57735,.57735,.40825,-.40825,.8165,.57735,-.57735,.57735,.90453,-.30151,.30151,.73451,.25969,-.62694,.90453,-.30151,.30151,.57735,-.57735,.57735,.57735,-.57735,-.57735,.73451,.62694,-.25969,.90453,-.30151,.30151,.73451,.25969,-.62694,.73451,.62694,-.25969,.57735,.57735,.57735,.57735,-.57735,.57735,.90453,-.30151,.30151,-.25969,.62694,.73451,-.62694,.25969,.73451,.30151,-.30151,.90453,.57735,-.57735,.57735,.30151,-.30151,.90453,-.62694,.25969,.73451,-.57735,-.57735,.57735,.57735,-.57735,.57735,-.57735,-.57735,.57735,-.62694,-.73451,-.25969,.30151,-.90453,.30151,.30151,-.90453,.30151,-.62694,-.73451,-.25969,-.25969,-.73451,-.62694,.57735,.57735,.57735,-.25969,.62694,.73451,.30151,-.30151,.90453,.57735,-.57735,.57735,.57735,-.57735,.57735,.30151,-.90453,.30151,-.25969,-.73451,-.62694,.57735,-.57735,-.57735,.25969,.62694,.73451,.62694,.25969,.73451,.91018,.29289,-.29289,.29289,.91018,-.29289,.62694,-.73451,-.25969,.25969,-.73451,-.62694,.29289,.29289,-.91018,.91018,.29289,-.29289,-.73451,.25969,-.62694,-.73451,.62694,-.25969,.29289,.91018,-.29289,.29289,.29289,-.91018,.29289,.29289,-.91018,.29289,.91018,-.29289,.91018,.29289,-.29289,-.57735,-.57735,.57735,-.57735,-.57735,-.57735,-.40825,-.40825,-.8165,-.40825,-.40825,.8165,-.57735,-.57735,-.57735,-.57735,-.57735,.57735,-.40825,-.40825,.8165,-.40825,-.40825,-.8165,-.57735,.57735,.57735,-.57735,-.57735,.57735,-.40825,-.8165,.40825,-.40825,.8165,.40825,-.57735,-.57735,.57735,-.57735,.57735,.57735,-.40825,.8165,.40825,-.40825,-.8165,.40825,.57735,-.57735,.57735,-.57735,-.57735,.57735,-.8165,-.40825,.40825,.8165,-.40825,.40825,-.57735,-.57735,.57735,.57735,-.57735,.57735,.8165,-.40825,.40825,-.8165,-.40825,.40825,-.57735,-.57735,-.57735,-.40825,-.40825,-.8165,.29289,.29289,-.91018,.25969,-.73451,-.62694,-.40825,-.40825,-.8165,-.57735,-.57735,-.57735,-.73451,.25969,-.62694,.29289,.29289,-.91018,.91018,.29289,-.29289,.8165,-.40825,.40825,.57735,-.57735,.57735,.62694,-.73451,-.25969,.57735,-.57735,.57735,.8165,-.40825,.40825,.91018,.29289,-.29289,.62694,.25969,.73451,-.40825,.8165,.40825,-.57735,.57735,.57735,.25969,.62694,.73451,.29289,.91018,-.29289,-.57735,.57735,.57735,-.40825,.8165,.40825,.29289,.91018,-.29289,-.73451,.62694,-.25969,-.57735,-.57735,.57735,-.8165,-.40825,.40825,-.57735,-.57735,.57735,-.30151,-.90453,.30151,-.8165,-.40825,.40825,-.57735,-.57735,.57735,-.30151,-.30151,.90453,-.57735,-.57735,.57735,-.57735,-.57735,.57735,-.40825,-.8165,.40825,-.57735,-.57735,.57735,-.30151,-.30151,.90453,-.57735,-.57735,.57735,-.40825,-.8165,.40825,-.57735,-.57735,.57735,-.90453,-.30151,.30151,-.40825,-.40825,.8165,-.57735,-.57735,.57735,-.30151,-.90453,.30151,-.57735,-.57735,.57735,-.57735,-.57735,.57735,-.40825,-.40825,.8165,-.57735,-.57735,.57735,-.90453,-.30151,.30151,-.57735,-.57735,.57735,-.90453,-.30151,.30151,-.73451,.25969,-.62694,-.57735,-.57735,-.57735,-.90453,-.30151,.30151,-.73451,.62694,-.25969,-.73451,.25969,-.62694,-.57735,-.57735,.57735,-.57735,.57735,.57735,-.73451,.62694,-.25969,-.90453,-.30151,.30151,.62694,.25969,.73451,.25969,.62694,.73451,-.30151,-.30151,.90453,.62694,.25969,.73451,-.30151,-.30151,.90453,-.57735,-.57735,.57735,.57735,-.57735,.57735,.62694,-.73451,-.25969,.57735,-.57735,.57735,-.57735,-.57735,.57735,-.30151,-.90453,.30151,.62694,-.73451,-.25969,-.30151,-.90453,.30151,.25969,-.73451,-.62694,-.30151,-.30151,.90453,.25969,.62694,.73451,-.57735,.57735,.57735,-.57735,-.57735,.57735,.25969,-.73451,-.62694,-.30151,-.90453,.30151,-.57735,-.57735,.57735,-.57735,-.57735,-.57735,-.25969,-.62694,.73451,-.62694,-.25969,.73451,-.91018,-.29289,-.29289,-.29289,-.91018,-.29289,-.62694,.73451,-.25969,-.25969,.73451,-.62694,-.29289,-.29289,-.91018,-.91018,-.29289,-.29289,.73451,-.25969,-.62694,.73451,-.62694,-.25969,-.29289,-.91018,-.29289,-.29289,-.29289,-.91018,-.29289,-.29289,-.91018,-.29289,-.91018,-.29289,-.91018,-.29289,-.29289,.57735,.57735,.57735,.57735,.57735,-.57735,.40825,.40825,-.8165,.40825,.40825,.8165,.57735,.57735,-.57735,.57735,.57735,.57735,.40825,.40825,.8165,.40825,.40825,-.8165,.57735,-.57735,.57735,.57735,.57735,.57735,.40825,.8165,.40825,.40825,-.8165,.40825,.57735,.57735,.57735,.57735,-.57735,.57735,.40825,-.8165,.40825,.40825,.8165,.40825,-.57735,.57735,.57735,.57735,.57735,.57735,.8165,.40825,.40825,-.8165,.40825,.40825,.57735,.57735,.57735,-.57735,.57735,.57735,-.8165,.40825,.40825,.8165,.40825,.40825,.57735,.57735,-.57735,.40825,.40825,-.8165,-.29289,-.29289,-.91018,-.25969,.73451,-.62694,.40825,.40825,-.8165,.57735,.57735,-.57735,.73451,-.25969,-.62694,-.29289,-.29289,-.91018,-.91018,-.29289,-.29289,-.8165,.40825,.40825,-.57735,.57735,.57735,-.62694,.73451,-.25969,-.57735,.57735,.57735,-.8165,.40825,.40825,-.91018,-.29289,-.29289,-.62694,-.25969,.73451,.40825,-.8165,.40825,.57735,-.57735,.57735,-.25969,-.62694,.73451,-.29289,-.91018,-.29289,.57735,-.57735,.57735,.40825,-.8165,.40825,-.29289,-.91018,-.29289,.73451,-.62694,-.25969,.57735,.57735,.57735,.8165,.40825,.40825,.57735,.57735,.57735,.30151,.90453,.30151,.8165,.40825,.40825,.57735,.57735,.57735,.30151,.30151,.90453,.57735,.57735,.57735,.57735,.57735,.57735,.40825,.8165,.40825,.57735,.57735,.57735,.30151,.30151,.90453,.57735,.57735,.57735,.40825,.8165,.40825,.57735,.57735,.57735,.90453,.30151,.30151,.40825,.40825,.8165,.57735,.57735,.57735,.30151,.90453,.30151,.57735,.57735,.57735,.57735,.57735,.57735,.40825,.40825,.8165,.57735,.57735,.57735,.90453,.30151,.30151,.57735,.57735,.57735,.90453,.30151,.30151,.73451,-.25969,-.62694,.57735,.57735,-.57735,.90453,.30151,.30151,.73451,-.62694,-.25969,.73451,-.25969,-.62694,.57735,.57735,.57735,.57735,-.57735,.57735,.73451,-.62694,-.25969,.90453,.30151,.30151,-.62694,-.25969,.73451,-.25969,-.62694,.73451,.30151,.30151,.90453,-.62694,-.25969,.73451,.30151,.30151,.90453,.57735,.57735,.57735,-.57735,.57735,.57735,-.62694,.73451,-.25969,-.57735,.57735,.57735,.57735,.57735,.57735,.30151,.90453,.30151,-.62694,.73451,-.25969,.30151,.90453,.30151,-.25969,.73451,-.62694,.30151,.30151,.90453,-.25969,-.62694,.73451,.57735,-.57735,.57735,.57735,.57735,.57735,-.25969,.73451,-.62694,.30151,.90453,.30151,.57735,.57735,.57735,.57735,.57735,-.57735,.91018,-.29289,-.29289,.62694,-.25969,.73451,.25969,-.62694,.73451,.29289,-.91018,-.29289,.29289,-.29289,-.91018,.25969,.73451,-.62694,.62694,.73451,-.25969,.91018,-.29289,-.29289,.29289,-.91018,-.29289,-.73451,-.62694,-.25969,-.73451,-.25969,-.62694,.29289,-.29289,-.91018,.29289,-.91018,-.29289,.29289,-.29289,-.91018,.91018,-.29289,-.29289,-.40825,.40825,-.8165,-.57735,.57735,-.57735,-.57735,.57735,.57735,-.40825,.40825,.8165,-.40825,.40825,.8165,-.57735,.57735,.57735,-.57735,.57735,-.57735,-.40825,.40825,-.8165,-.40825,.8165,.40825,-.57735,.57735,.57735,-.57735,-.57735,.57735,-.40825,-.8165,.40825,-.40825,-.8165,.40825,-.57735,-.57735,.57735,-.57735,.57735,.57735,-.40825,.8165,.40825,-.8165,.40825,.40825,-.57735,.57735,.57735,.57735,.57735,.57735,.8165,.40825,.40825,.8165,.40825,.40825,.57735,.57735,.57735,-.57735,.57735,.57735,-.8165,.40825,.40825,.29289,-.29289,-.91018,-.40825,.40825,-.8165,-.57735,.57735,-.57735,.25969,.73451,-.62694,-.73451,-.25969,-.62694,-.57735,.57735,-.57735,-.40825,.40825,-.8165,.29289,-.29289,-.91018,.57735,.57735,.57735,.8165,.40825,.40825,.91018,-.29289,-.29289,.62694,.73451,-.25969,.91018,-.29289,-.29289,.8165,.40825,.40825,.57735,.57735,.57735,.62694,-.25969,.73451,.25969,-.62694,.73451,-.57735,-.57735,.57735,-.40825,-.8165,.40825,.29289,-.91018,-.29289,.29289,-.91018,-.29289,-.40825,-.8165,.40825,-.57735,-.57735,.57735,-.73451,-.62694,-.25969,-.57735,.57735,.57735,-.8165,.40825,.40825,-.57735,.57735,.57735,-.30151,.90453,.30151,-.30151,.30151,.90453,-.57735,.57735,.57735,-.8165,.40825,.40825,-.57735,.57735,.57735,-.57735,.57735,.57735,-.40825,.8165,.40825,-.57735,.57735,.57735,-.30151,.30151,.90453,-.57735,.57735,.57735,-.40825,.8165,.40825,-.57735,.57735,.57735,-.90453,.30151,.30151,-.30151,.90453,.30151,-.57735,.57735,.57735,-.40825,.40825,.8165,-.57735,.57735,.57735,-.57735,.57735,.57735,-.40825,.40825,.8165,-.57735,.57735,.57735,-.90453,.30151,.30151,-.73451,-.25969,-.62694,-.90453,.30151,.30151,-.57735,.57735,.57735,-.57735,.57735,-.57735,-.73451,-.62694,-.25969,-.90453,.30151,.30151,-.73451,-.25969,-.62694,-.73451,-.62694,-.25969,-.57735,-.57735,.57735,-.57735,.57735,.57735,-.90453,.30151,.30151,.25969,-.62694,.73451,.62694,-.25969,.73451,-.30151,.30151,.90453,-.57735,.57735,.57735,-.30151,.30151,.90453,.62694,-.25969,.73451,.57735,.57735,.57735,-.57735,.57735,.57735,.57735,.57735,.57735,.62694,.73451,-.25969,-.30151,.90453,.30151,-.30151,.90453,.30151,.62694,.73451,-.25969,.25969,.73451,-.62694,-.57735,-.57735,.57735,.25969,-.62694,.73451,-.30151,.30151,.90453,-.57735,.57735,.57735,-.57735,.57735,.57735,-.30151,.90453,.30151,.25969,.73451,-.62694,-.57735,.57735,-.57735],colors:[],uvs:[[]],faces:[35,9,8,4,5,0,0,1,2,3,35,1,13,6,4,0,4,5,6,7,35,17,16,5,6,0,8,9,10,11,34,6,5,4,0,12,13,14,35,22,18,12,26,0,15,16,17,18,35,14,30,26,12,0,19,20,21,22,35,15,23,27,11,0,23,24,25,26,35,21,10,11,27,0,27,28,29,30,35,7,19,25,3,0,31,32,33,34,35,29,2,3,25,0,35,36,37,38,35,14,12,6,13,0,39,40,41,42,35,12,18,17,6,0,43,44,45,46,35,4,3,2,1,0,47,48,49,50,35,7,3,4,8,0,51,52,53,54,35,11,10,9,5,0,55,56,57,58,35,15,11,5,16,0,59,60,61,62,35,29,25,0,28,0,63,64,65,66,35,25,19,20,0,0,67,68,69,70,35,21,27,0,20,0,71,72,73,74,35,0,27,23,24,0,75,76,77,78,35,26,30,28,0,0,79,80,81,82,35,22,26,0,24,0,83,84,85,86,35,22,24,17,18,0,87,88,89,90,34,24,16,17,0,91,92,93,35,23,15,16,24,0,94,95,96,97,34,8,9,20,0,98,99,100,35,8,20,19,7,0,101,102,103,104,35,1,2,29,28,0,105,106,107,108,34,1,28,13,0,109,110,111,35,20,9,10,21,0,112,113,114,115,35,13,28,30,14,0,116,117,118,119,35,35,39,40,36,0,120,121,122,123,35,37,44,32,35,0,124,125,126,127,35,36,47,48,37,0,128,129,130,131,34,36,37,35,0,132,133,134,35,43,49,53,57,0,135,136,137,138,35,57,61,45,43,0,139,140,141,142,35,58,54,46,42,0,143,144,145,146,35,42,41,52,58,0,147,148,149,150,35,56,50,38,34,0,151,152,153,154,35,34,33,60,56,0,155,156,157,158,35,37,43,45,44,0,159,160,161,162,35,48,49,43,37,0,163,164,165,166,35,33,34,35,32,0,167,168,169,170,35,35,34,38,39,0,171,172,173,174,35,40,41,42,36,0,175,176,177,178,35,36,42,46,47,0,179,180,181,182,35,31,56,60,59,0,183,184,185,186,35,51,50,56,31,0,187,188,189,190,35,31,58,52,51,0,191,192,193,194,35,54,58,31,55,0,195,196,197,198,35,59,61,57,31,0,199,200,201,202,35,31,57,53,55,0,203,204,205,206,35,48,55,53,49,0,207,208,209,210,34,47,55,48,0,211,212,213,35,47,46,54,55,0,214,215,216,217,34,40,39,51,0,218,219,220,35,50,51,39,38,0,221,222,223,224,35,60,33,32,59,0,225,226,227,228,34,59,32,44,0,229,230,231,35,41,40,51,52,0,232,233,234,235,35,61,59,44,45,0,236,237,238,239,35,66,70,71,67,0,240,241,242,243,35,68,75,63,66,0,244,245,246,247,35,67,78,79,68,0,248,249,250,251,34,67,68,66,0,252,253,254,35,74,80,84,88,0,255,256,257,258,35,88,92,76,74,0,259,260,261,262,35,89,85,77,73,0,263,264,265,266,35,73,72,83,89,0,267,268,269,270,35,87,81,69,65,0,271,272,273,274,35,65,64,91,87,0,275,276,277,278,35,68,74,76,75,0,279,280,281,282,35,79,80,74,68,0,283,284,285,286,35,64,65,66,63,0,287,288,289,290,35,66,65,69,70,0,291,292,293,294,35,71,72,73,67,0,295,296,297,298,35,67,73,77,78,0,299,300,301,302,35,62,87,91,90,0,303,304,305,306,35,82,81,87,62,0,307,308,309,310,35,62,89,83,82,0,311,312,313,314,35,85,89,62,86,0,315,316,317,318,35,90,92,88,62,0,319,320,321,322,35,62,88,84,86,0,323,324,325,326,35,79,86,84,80,0,327,328,329,330,34,78,86,79,0,331,332,333,35,78,77,85,86,0,334,335,336,337,34,71,70,82,0,338,339,340,35,81,82,70,69,0,341,342,343,344,35,91,64,63,90,0,345,346,347,348,34,90,63,75,0,349,350,351,35,72,71,82,83,0,352,353,354,355,35,92,90,75,76,0,356,357,358,359,35,102,101,97,98,0,360,361,362,363,35,94,106,99,97,0,364,365,366,367,35,110,109,98,99,0,368,369,370,371,34,99,98,97,0,372,373,374,35,115,111,105,119,0,375,376,377,378,35,107,123,119,105,0,379,380,381,382,35,108,116,120,104,0,383,384,385,386,35,114,103,104,120,0,387,388,389,390,35,100,112,118,96,0,391,392,393,394,35,122,95,96,118,0,395,396,397,398,35,107,105,99,106,0,399,400,401,402,35,105,111,110,99,0,403,404,405,406,35,97,96,95,94,0,407,408,409,410,35,100,96,97,101,0,411,412,413,414,35,104,103,102,98,0,415,416,417,418,35,108,104,98,109,0,419,420,421,422,35,122,118,93,121,0,423,424,425,426,35,118,112,113,93,0,427,428,429,430,35,114,120,93,113,0,431,432,433,434,35,93,120,116,117,0,435,436,437,438,35,119,123,121,93,0,439,440,441,442,35,115,119,93,117,0,443,444,445,446,35,115,117,110,111,0,447,448,449,450,34,117,109,110,0,451,452,453,35,116,108,109,117,0,454,455,456,457,34,101,102,113,0,458,459,460,35,101,113,112,100,0,461,462,463,464,35,94,95,122,121,0,465,466,467,468,34,94,121,106,0,469,470,471,35,113,102,103,114,0,472,473,474,475,35,106,121,123,107,0,476,477,478,479,35,128,132,133,129,0,480,481,482,483,35,130,137,125,128,0,484,485,486,487,35,129,140,141,130,0,488,489,490,491,34,129,130,128,0,492,493,494,35,136,142,146,150,0,495,496,497,498,35,150,154,138,136,0,499,500,501,502,35,151,147,139,135,0,503,504,505,506,35,135,134,145,151,0,507,508,509,510,35,149,143,131,127,0,511,512,513,514,35,127,126,153,149,0,515,516,517,518,35,130,136,138,137,0,519,520,521,522,35,141,142,136,130,0,523,524,525,526,35,126,127,128,125,0,527,528,529,530,35,128,127,131,132,0,531,532,533,534,35,133,134,135,129,0,535,536,537,538,35,129,135,139,140,0,539,540,541,542,35,124,149,153,152,0,543,544,545,546,35,144,143,149,124,0,547,548,549,550,35,124,151,145,144,0,551,552,553,554,35,147,151,124,148,0,555,556,557,558,35,152,154,150,124,0,559,560,561,562,35,124,150,146,148,0,563,564,565,566,35,141,148,146,142,0,567,568,569,570,34,140,148,141,0,571,572,573,35,140,139,147,148,0,574,575,576,577,34,133,132,144,0,578,579,580,35,143,144,132,131,0,581,582,583,584,35,153,126,125,152,0,585,586,587,588,34,152,125,137,0,589,590,591,35,134,133,144,145,0,592,593,594,595,35,154,152,137,138,0,596,597,598,599,35,164,163,159,160,0,600,601,602,603,35,156,168,161,159,0,604,605,606,607,35,172,171,160,161,0,608,609,610,611,34,161,160,159,0,612,613,614,35,177,173,167,181,0,615,616,617,618,35,169,185,181,167,0,619,620,621,622,35,170,178,182,166,0,623,624,625,626,35,176,165,166,182,0,627,628,629,630,35,162,174,180,158,0,631,632,633,634,35,184,157,158,180,0,635,636,637,638,35,169,167,161,168,0,639,640,641,642,35,167,173,172,161,0,643,644,645,646,35,159,158,157,156,0,647,648,649,650,35,162,158,159,163,0,651,652,653,654,35,166,165,164,160,0,655,656,657,658,35,170,166,160,171,0,659,660,661,662,35,184,180,155,183,0,663,664,665,666,35,180,174,175,155,0,667,668,669,670,35,176,182,155,175,0,671,672,673,674,35,155,182,178,179,0,675,676,677,678,35,181,185,183,155,0,679,680,681,682,35,177,181,155,179,0,683,684,685,686,35,177,179,172,173,0,687,688,689,690,34,179,171,172,0,691,692,693,35,178,170,171,179,0,694,695,696,697,34,163,164,175,0,698,699,700,35,163,175,174,162,0,701,702,703,704,35,156,157,184,183,0,705,706,707,708,34,156,183,168,0,709,710,711,35,175,164,165,176,0,712,713,714,715,35,168,183,185,169,0,716,717,718,719,35,195,194,190,191,0,720,721,722,723,35,187,199,192,190,0,724,725,726,727,35,203,202,191,192,0,728,729,730,731,34,192,191,190,0,732,733,734,35,208,204,198,212,0,735,736,737,738,35,200,216,212,198,0,739,740,741,742,35,201,209,213,197,0,743,744,745,746,35,207,196,197,213,0,747,748,749,750,35,193,205,211,189,0,751,752,753,754,35,215,188,189,211,0,755,756,757,758,35,200,198,192,199,0,759,760,761,762,35,198,204,203,192,0,763,764,765,766,35,190,189,188,187,0,767,768,769,770,35,193,189,190,194,0,771,772,773,774,35,197,196,195,191,0,775,776,777,778,35,201,197,191,202,0,779,780,781,782,35,215,211,186,214,0,783,784,785,786,35,211,205,206,186,0,787,788,789,790,35,207,213,186,206,0,791,792,793,794,35,186,213,209,210,0,795,796,797,798,35,212,216,214,186,0,799,800,801,802,35,208,212,186,210,0,803,804,805,806,35,208,210,203,204,0,807,808,809,810,34,210,202,203,0,811,812,813,35,209,201,202,210,0,814,815,816,817,34,194,195,206,0,818,819,820,35,194,206,205,193,0,821,822,823,824,35,187,188,215,214,0,825,826,827,828,34,187,214,199,0,829,830,831,35,206,195,196,207,0,832,833,834,835,35,199,214,216,200,0,836,837,838,839,35,221,225,226,222,0,840,841,842,843,35,223,230,218,221,0,844,845,846,847,35,222,233,234,223,0,848,849,850,851,34,222,223,221,0,852,853,854,35,229,235,239,243,0,855,856,857,858,35,243,247,231,229,0,859,860,861,862,35,244,240,232,228,0,863,864,865,866,35,228,227,238,244,0,867,868,869,870,35,242,236,224,220,0,871,872,873,874,35,220,219,246,242,0,875,876,877,878,35,223,229,231,230,0,879,880,881,882,35,234,235,229,223,0,883,884,885,886,35,219,220,221,218,0,887,888,889,890,35,221,220,224,225,0,891,892,893,894,35,226,227,228,222,0,895,896,897,898,35,222,228,232,233,0,899,900,901,902,35,217,242,246,245,0,903,904,905,906,35,237,236,242,217,0,907,908,909,910,35,217,244,238,237,0,911,912,913,914,35,240,244,217,241,0,915,916,917,918,35,245,247,243,217,0,919,920,921,922,35,217,243,239,241,0,923,924,925,926,35,234,241,239,235,0,927,928,929,930,34,233,241,234,0,931,932,933,35,233,232,240,241,0,934,935,936,937,34,226,225,237,0,938,939,940,35,236,237,225,224,0,941,942,943,944,35,246,219,218,245,0,945,946,947,948,34,245,218,230,0,949,950,951,35,227,226,237,238,0,952,953,954,955,35,247,245,230,231,0,956,957,958,959]});
return a.geometry}function isInfinite(a){return!isFinite(a)}function initUI(){$("#bookmark-list-header a").append(SCMAP.Symbol.getTag(SCMAP.Symbols.BOOKMARK).addClass("fa-lg")),$("#hangar-list-header a").append(SCMAP.Symbol.getTag(SCMAP.Symbols.HANGAR).addClass("fa-lg")),$("#commented-list-header a").append(SCMAP.Symbol.getTag(SCMAP.Symbols.COMMENTS).addClass("fa-lg")),$("#faction-list").empty();for(var a in SCMAP.data.factions){var b=SCMAP.data.factions[a],c=$('<h3><a href="#" data-toggle-next="next"><i class="fa fa-fw fa-lg fa-caret-right"></i>'+b.name+"</a></h3>");c.find("a").css("color",b.color.getStyle());var d=$('<ul style="display: none;" id="list-faction-'+b.id+'" class="fa-ul ui-section"></ul>');$("#faction-list").append(c).append(d)}$("#map_ui").tabs({active:0,activate:function(a,b){a.preventDefault();var c=b.newTab.find("a").attr("href");switch(c){case"#editor":map.canEdit&&($("#webgl-container").removeClass().addClass("noselect webgl-container-edit"),window.editor.enabled=!0,window.controls.requireAlt=!0);break;case"#listing":var d,e=SCMAP.System.SortedList(),f=0,g=0,h=0;$("#hangar-list").empty(),$("#bookmark-list").empty(),$("#commented-list").empty(),$("#a-z-list").empty();for(var i=0;i<e.length;i+=1){d=e[i];var j=d.createInfoLink().outerHtml();storage&&"1"===storage["hangarLocation."+d.id]&&(g+=1,$("#hangar-list").append($("<li>"+j+"</li>"))),storage&&"1"===storage["bookmarks."+d.id]&&(f+=1,$("#bookmark-list").append($("<li>"+j+"</li>"))),storage&&"comments."+d.id in storage&&(h+=1,$("#commented-list").append($("<li>"+j+"</li>"))),$("#a-z-list").append($("<li>"+j+"</li>"))}f>0?$("#bookmark-list-wrapper").show():$("#bookmark-list-wrapper").hide(),g>0?$("#hangar-list-wrapper").show():$("#hangar-list-wrapper").hide(),h>0?$("#commented-list-wrapper").show():$("#commented-list-wrapper").hide();for(var k in SCMAP.data.factions){var l=SCMAP.data.factions[k];for($("#list-faction-"+l.id).empty(),i=0;i<e.length;i+=1)d=e[i],d.faction.id===l.id&&$("#list-faction-"+l.id).append("<li>"+d.createInfoLink().outerHtml()+"</li>")}break;default:$("#webgl-container").removeClass().addClass("noselect webgl-container-noedit"),window.editor.enabled=!1,window.controls.requireAlt=!1}$("#map_ui").data("jsp").reinitialise()}}),$("#map_ui").jScrollPane({showArrows:!0}),$("#toggle-glow").prop("checked",SCMAP.settings.glow),$("#toggle-labels").prop("checked",SCMAP.settings.labels),$("#toggle-label-icons").prop("checked",SCMAP.settings.labelIcons),$("#avoid-hostile").prop("checked",storage&&"1"===storage["route.avoidHostile"]),$("#avoid-off-limits").prop("checked",storage&&"1"===storage["route.avoidOffLimits"]),$("#avoid-unknown-jumppoints").prop("checked",storage&&"1"===storage["route.avoidUnknownJumppoints"]);for(var e in SCMAP.Symbols){e=SCMAP.Symbols[e];var f=$('<li><i class="fa-li fa '+e.faClass+'"></i>'+e.description+"</li>");f.css("color",e.color),$("#map_ui ul.legend").append(f)}$("#3d-mode").prop("checked",storage&&"3d"===storage.mode),$("#lock-rotation").prop("checked",storage&&"1"===storage["control.rotationLocked"]),$("#3d-mode").on("change",function(){this.checked?displayState.to3d():displayState.to2d()}),$("#avoid-hostile").on("change",function(){storage&&(storage["route.avoidHostile"]=this.checked?"1":"0"),map.rebuildCurrentRoute()}),$("#avoid-off-limits").on("change",function(){storage&&(storage["route.avoidOffLimits"]=this.checked?"1":"0",map.rebuildCurrentRoute())}),$("#avoid-unknown-jumppoints").on("change",function(){storage&&(storage["route.avoidUnknownJumppoints"]=this.checked?"1":"0",map.rebuildCurrentRoute())}),$("#lock-rotation").on("change",function(){controls.noRotate=this.checked,storage&&(storage["control.rotationLocked"]=this.checked?"1":"0")}),$("#toggle-stats").prop("checked",storage&&"1"===storage["renderer.Stats"]?!0:!1).on("change",function(){this.checked?$("#stats").show():$("#stats").hide(),storage&&(storage["renderer.Stats"]=this.checked?"1":"0")}),$("#toggle-fxaa").prop("checked",storage&&"1"===storage["effect.FXAA"]?!0:!1).on("change",function(){effectFXAA.enabled=this.checked,storage&&(storage["effect.FXAA"]=this.checked?"1":"0")}),$("#toggle-bloom").prop("checked",storage&&"1"===storage["effect.Bloom"]?!0:!1).on("change",function(){for(var a=0;a<composer.passes.length;a++)composer.passes[a]instanceof THREE.BloomPass&&(composer.passes[a].enabled=this.checked);storage&&(storage["effect.Bloom"]=this.checked?"1":"0")}),$("#toggle-glow").on("change",function(){SCMAP.settings.glow=this.checked,map.updateSystems(),storage&&(storage["settings.Glow"]=this.checked?"1":"0")}),$("#toggle-labels").on("change",function(){SCMAP.settings.labels=this.checked,map.updateSystems(),storage&&(storage["settings.Labels"]=this.checked?"1":"0")}),$("#toggle-label-icons").on("change",function(){SCMAP.settings.labelIcons=this.checked,map.updateSystems(),storage&&(storage["settings.LabelIcons"]=this.checked?"1":"0")}),$("#resetCamera").on("click",function(){controls.cameraTo(cameraDefaults.target,cameraDefaults.theta,cameraDefaults.phi,cameraDefaults.radius)}),$("#centreCamera").on("click",function(){controls.moveTo(cameraDefaults.target)}),$("#northCamera").on("click",function(){controls.rotateTo(0,void 0,void 0)}),$("#topCamera").on("click",function(){controls.rotateTo(0,0,180)}),$("#top2D").on("click",function(){controls.noRotate=!0,$("#lock-rotation").prop("checked",!0),displayState.to2d(),controls.rotateTo(0,0,180)}),$(".quick-button.with-checkbox").on("click",function(){var a=$(this);a.find("input[type=checkbox]").click()}),$("#map_ui").on("click","a[data-toggle-next]",function(a){var b=$(this);a.preventDefault();var c=b.parent().next();c.toggle(),c.is(":visible")?b.parent().find("> a > i").first().removeClass("fa-caret-right").addClass("fa-caret-down"):b.parent().find("> a > i").first().addClass("fa-caret-right").removeClass("fa-caret-down"),$("#map_ui").data("jsp").reinitialise()}),$("#map_ui").on("click","a[data-toggle-child]",function(a){var b=$(this);a.preventDefault();var c=b.parent().find(b.data("toggle-child"));c.toggle(),c.is(":visible")?b.parent().find("> a > i").removeClass("fa-caret-right").addClass("fa-caret-down"):b.parent().find("> a > i").addClass("fa-caret-right").removeClass("fa-caret-down"),$("#map_ui").data("jsp").reinitialise()}),$("#map_ui").on("click","a[data-goto='system']",function(a){a.preventDefault();var b=$(this),c=SCMAP.System.getById(b.data("system"));c.displayInfo(),controls.moveTo(c)});var g=function(a){if(a.preventDefault(),storage){var b=SCMAP.System.getById($(this).data("system")),c=$(this).val();if("string"==typeof c&&c.length>0){storage["comments."+b.id]=c;var d=$(markdown.toHTML(c));$("#comments-md").html(d)}else delete storage["comments."+b.id],$("#comments-md").empty();b.updateSceneObject(scene)}};$("#comments").on("keyup",g),$("#comments").on("blur",g),$("#comments").on("change",g),$("#bookmark").on("change",function(){var a=SCMAP.System.getById($(this).data("system"));storage&&(this.checked?storage["bookmarks."+a.id]="1":delete storage["bookmarks."+a.id],a.updateSceneObject(scene))}),$("#hangar-location").on("change",function(){var a=SCMAP.System.getById($(this).data("system"));storage&&(this.checked?storage["hangarLocation."+a.id]="1":delete storage["hangarLocation."+a.id],a.updateSceneObject(scene))})}function makeSafeForCSS(a){return"string"==typeof a?a.replace(/[^a-zA-Z0-9]/g,function(a){var b=a.charCodeAt(0);return 32==b?"-":b>=65&&90>=b?"_"+a.toLowerCase():b.toString(16).slice(-4)}):void 0}function init(){var a,b,c,d,e,f;hasLocalStorage()?(storage=window.localStorage,console.log("We have localStorage")):console.log("We don't have localStorage :("),dpr=1,void 0!==window.devicePixelRatio&&(dpr=window.devicePixelRatio),SCMAP.settings.glow=storage&&"0"===storage["settings.Glow"]?!1:!0,SCMAP.settings.labels=storage&&"0"===storage["settings.Labels"]?!1:!0,SCMAP.settings.labelIcons=storage&&"0"===storage["settings.LabelIcons"]?!1:!0,a=document.createElement("div"),a.id="webgl-container",a.className="noselect webgl-container-noedit",document.body.appendChild(a),e=window.innerWidth||2,f=window.innerHeight||2,camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,10,1600),camera.position.x=cameraDefaults.x,camera.position.y=cameraDefaults.y,camera.position.z=cameraDefaults.z,camera.setViewOffset(e,f,-($("#map_ui").width()/2),0,e,f),controls=new SCMAP.OrbitControls(camera,$("#webgl-container")[0]),controls.target=cameraDefaults.target.clone(),controls.restoreOldPosition(),controls.minPolarAngle=0,controls.maxPolarAngle=THREE.Math.degToRad(85),controls.rotateSpeed=$("#gl-info").data("rotateSpeed"),controls.zoomSpeed=$("#gl-info").data("zoomSpeed"),controls.panSpeed=$("#gl-info").data("panSpeed"),controls.noZoom=!1,controls.noPan=!1,controls.mapMode=!0,controls.minDistance=20,controls.maxDistance=800,controls.keyPanSpeed=25,controls.addEventListener("change",render),controls.noRotate=storage&&"1"===storage["control.rotationLocked"]?!0:!1,scene=new THREE.Scene,renderer=new THREE.WebGLRenderer({clearColor:0,clearAlpha:1,antialias:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.autoClear=!1,a.appendChild(renderer.domElement),map=new SCMAP.Map(scene),controls.map=map,editor=new SCMAP.Editor(map,camera),editor.panSpeed=.6,document.addEventListener("change",render),initUI(),map.populateScene(),stats=new Stats,stats.domElement.style.position="absolute",stats.domElement.style.top="0px",stats.domElement.style.right="0px",stats.domElement.style.display="none",stats.domElement.style.zIndex="100",a.appendChild(stats.domElement),storage&&"1"===storage["renderer.Stats"]&&$("#stats").show(),window.addEventListener("resize",onWindowResize,!1),b=new THREE.RenderPass(scene,camera),d=new THREE.BloomPass(.75),c=new THREE.ShaderPass(THREE.CopyShader),c.renderToScreen=!0,effectFXAA=new THREE.ShaderPass(THREE.FXAAShader),effectFXAA.uniforms.resolution.value.set(1/(e*dpr),1/(f*dpr)),effectFXAA.enabled=storage&&"1"===storage["effect.FXAA"]?!0:!1,d.enabled=storage&&"1"===storage["effect.Bloom"]?!0:!1,composer=new THREE.EffectComposer(renderer),composer.setSize(e*dpr,f*dpr),composer.addPass(b),composer.addPass(effectFXAA),composer.addPass(d),composer.addPass(c),displayState=buildDisplayModeFSM(storage&&storage.mode?storage&&storage.mode:"2d")}function buildCross(){var a=new THREE.MeshBasicMaterial({wireframe:!0,color:16711680,linewidth:1}),b=new THREE.Object3D,c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-50,1,0)),c.vertices.push(new THREE.Vector3(50,1,0));var d=new THREE.Line(c,a);b.add(d),c=new THREE.Geometry;var e=new THREE.MeshBasicMaterial({wireframe:!0,color:15790080,linewidth:1});c.vertices.push(new THREE.Vector3(0,1,-50)),c.vertices.push(new THREE.Vector3(0,1,50)),d=new THREE.Line(c,e),b.add(d);var f=new THREE.MeshBasicMaterial({wireframe:!0,color:240,linewidth:1});return c=new THREE.Geometry,c.vertices.push(new THREE.Vector3(0,-50,0)),c.vertices.push(new THREE.Vector3(0,50,0)),d=new THREE.Line(c,f),b.add(d),b}function onWindowResize(){var a=window.innerWidth||2,b=window.innerHeight||2;camera.aspect=a/b,camera.setViewOffset(a,b,-($("#map_ui").width()/2),0,a,b),camera.updateProjectionMatrix(),effectFXAA.uniforms.resolution.value.set(1/(a*dpr),1/(b*dpr)),renderer.setSize(a,b),composer.reset()}function buildDisplayModeFSM(a){var b,c,d,e;return d={y:"3d"===a?100:.5},b=new TWEEN.Tween(d).to({y:.5},1e3).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){map.destroyCurrentRoute();for(var a=0;a<scene.children.length;a++){var b=scene.children[a];"function"==typeof b.scaleY&&b.scaleY(this.y)}}),c=new TWEEN.Tween(d).to({y:100},1e3).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){map.destroyCurrentRoute();for(var a=0;a<scene.children.length;a++){var b=scene.children[a];"function"==typeof b.scaleY&&b.scaleY(this.y)}}),e=StateMachine.create({initial:a||"3d",events:[{name:"to2d",from:"3d",to:"2d"},{name:"to3d",from:"2d",to:"3d"}],callbacks:{onenter2d:function(){$("#3d-mode").prop("checked",!1),storage&&(storage.mode="2d")},onenter3d:function(){$("#3d-mode").prop("checked",!0),storage&&(storage.mode="3d")},onleave2d:function(){return c.onComplete(function(){e.transition()}),c.start(),StateMachine.ASYNC},onleave3d:function(){return b.onComplete(function(){e.transition()}),b.start(),StateMachine.ASYNC}},error:function(a,b,c,d,e,f){console.log("event "+a+" was naughty : "+f)}})}function animate(){requestAnimationFrame(animate),TWEEN.update(),void 0!==controls&&controls.update(),void 0!==editor&&editor.update(),stats.update(),render()}function render(){scene.updateMatrixWorld(),scene.traverse(function(a){a instanceof THREE.LOD&&a.update(camera)}),map.animateSelector(),renderer.clear(),composer.render()}function hasLocalStorage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function humanSort(a,b){var c,d,e,f=a.name.split(/(\d+)/),g=b.name.split(/(\d+)/);for(c=0;c<Math.max(f.length,g.length);c++)if(f[c]!=g[c])return d=isNaN(parseInt(f[c],10))?f[c]:parseInt(f[c],10),e=isNaN(parseInt(g[c],10))?g[c]:parseInt(g[c],10),void 0===d||void 0===e?f.length-g.length:e>d?-1:1;return 0}if("undefined"==typeof jQuery)throw new Error("starcitizen-webgl-map requires jQuery");if("undefined"==typeof THREE)throw new Error("starcitizen-webgl-map requires THREE.js");var SCMAP=SCMAP||{REVISION:"3"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},SCMAP.data={factions:[],crime_levels:[],uee_strategic_values:[],goods:[],map:{},systems:[],systemsById:[]},SCMAP.Symbol={},SCMAP.Symbols={},SCMAP.Symbol.SIZE=24,SCMAP.Symbol.SPACING=9,SCMAP.Symbol.getTag=function(a){var b=$('<i title="'+a.description+'" class="fa fa-fw '+a.faClass+'"></i>');return b.css("color",a.color),b},SCMAP.Symbols.DANGER={code:"",scale:.9,faClass:"fa-warning",description:"Danger, hostile faction",color:"rgba(255,50,50,0.95)"},SCMAP.Symbols.WARNING={code:"",scale:.9,faClass:"fa-warning",description:"Warning, hostile environment",color:"rgba(255,117,25,0.95)"},SCMAP.Symbols.HANGAR={code:"",scale:1.15,faClass:"fa-home",description:"Hangar location",color:"rgba(255,255,255,0.95)",offset:new THREE.Vector2(-.25,2)},SCMAP.Symbols.INFO={code:"",scale:1,faClass:"fa-info-circle",description:"Information available",color:"rgba(255, 162, 255, 0.95)"},SCMAP.Symbols.TRADE={code:"",scale:.9,faClass:"fa-exchange",description:"Major trade hub",color:"rgba(255,255,0,0.95)",offset:new THREE.Vector2(0,-3)},SCMAP.Symbols.BANNED={code:"",scale:1,faClass:"fa-ban",description:"System off-limits",color:"rgba(255, 117, 25, 0.95)"},SCMAP.Symbols.COMMENTS={code:"",scale:1,faClass:"fa-comment",description:"Your comments",color:"rgba(106, 187, 207, 0.95)",offset:new THREE.Vector2(0,-3)},SCMAP.Symbols.BOOKMARK={code:"",scale:1.05,faClass:"fa-bookmark",description:"Bookmarked",color:"rgba(102, 193, 0, 0.95)",offset:new THREE.Vector2(-2,1)},SCMAP.travelTimeAU=function(a){return SCMAP.approximateTraveltimePerAU*a},SCMAP.usersFaction=function(){return SCMAP.data.factionsByName.UEE},SCMAP.LYtoAU=63241.077,SCMAP.approximateTraveltimePerAU=2495,SCMAP.Settings=function(){this.glow=!0,this.labels=!0,this.labelIcons=!0},SCMAP.settings=new SCMAP.Settings,SCMAP.Editor=function(a,b,c){function d(a){g.enabled!==!1&&void 0!==g.map.selected&&(a.altKey||(a.preventDefault(),0===a.button?n=m.MOVE_XZ:2===a.button&&(n=m.MOVE_Y),h.set(a.clientX,a.clientY),g.domElement.addEventListener("mousemove",e,!1),g.domElement.addEventListener("mouseup",f,!1)))}function e(a){g.enabled!==!1&&void 0!==g.map.selected&&(a.altKey||(a.preventDefault(),(n===m.MOVE_XZ||n===m.MOVE_Y)&&(i.set(a.clientX,a.clientY),j.subVectors(i,h),g.move(j),h.copy(i)),g.update()))}function f(a){g.enabled!==!1&&(a.altKey||(g.domElement.removeEventListener("mousemove",e,!1),g.domElement.removeEventListener("mouseup",f,!1),n=m.NONE))}this.map=a,this.camera=b,this.domElement=void 0!==c?c:document,this.enabled=!1;var g=this,h=new THREE.Vector2,i=new THREE.Vector2,j=new THREE.Vector2,k=new THREE.Vector3,l=new THREE.Vector3,m={NONE:-1,MOVE_XZ:0,MOVE_Y:1},n=m.NONE,o={type:"change"};this.moveLeft=function(a){var b=window.controls.target.clone().setY(this.camera.position.y),c=this.camera.position.clone().sub(b).negate().setLength(a),d=new THREE.Vector3(0,1,0);c.applyAxisAngle(d,THREE.Math.degToRad(90)),k.add(c)},this.moveUp=function(a){var b=new THREE.Vector3,c=this.map.selected.object.matrix.elements;b.set(c[4],c[5],c[6]),b.multiplyScalar(a),k.add(b)},this.moveBack=function(a){var b=window.controls.target.clone().setY(this.camera.position.y),c=this.camera.position.clone().sub(b).negate().setLength(a);k.add(c)},this.move=function(a){var b=g.domElement===document?g.domElement.body:g.domElement,c=g.map.selected.object.position.clone().sub(g.camera.position),d=c.length();d*=Math.tan(g.camera.fov/2*Math.PI/180),n===m.MOVE_Y?g.moveUp(2*a.y*d/b.clientHeight):(g.moveLeft(2*a.x*d/b.clientHeight),g.moveBack(2*a.y*d/b.clientHeight))},this.update=function(){if(g.enabled!==!1&&void 0!==this.map.selected){this.map.selected.object.position.sub(k),void 0!==this.map.selected.object.system.labelObject&&this.map.selected.object.system.labelObject.position.sub(k);for(var a=0;a<this.map.selected.object.system.routeObjects.length;a++){var b=this.map.selected.object.system.routeObjects[a];b.geometry.verticesNeedUpdate=!0}k.set(0,0,0),l.distanceTo(this.map.selected.object.position)>0&&(this.dispatchEvent(o),l.copy(this.map.selected.object.position))}},this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1),this.domElement.addEventListener("mousedown",d,!1)},SCMAP.Editor.prototype=Object.create(THREE.EventDispatcher.prototype),SCMAP.SelectedSystemGeometry=SCMAP.SelectedSystemGeometry||_build_selected_system_object(),SCMAP.JumpPoint=function(a){this.name="string"==typeof a.name&&a.name.length>1?a.name:void 0,this.source=a.source instanceof SCMAP.System?a.source:void 0,this.destination=a.destination instanceof SCMAP.System?a.destination:void 0,this.drawn=!1,this.typeId="number"==typeof a.typeId?a.typeId:4,this.entryAU=new THREE.Vector3("number"==typeof a.entryAU[0]?a.entryAU[0]:0,"number"==typeof a.entryAU[1]?a.entryAU[1]:0,"number"==typeof a.entryAU[2]?a.entryAU[2]:0),this.isValid()?(void 0===this.name||""===this.name)&&(this.name="["+this.source.name+" to "+this.destination.name+"]"):console.error("Invalid route created")},SCMAP.JumpPoint.prototype={constructor:SCMAP.JumpPoint,length:function(){return this.isValid()?this.source.position.distanceTo(this.destination.position):void 0},jumpTime:function(){return this.isValid()?4*this.length():void 0},fuelConsumption:function(){return this.isValid()?0:void 0},buildSceneObject:function(){var a,b;if(!(this.drawn||(a=this.getOppositeJumppoint(),a instanceof SCMAP.JumpPoint&&a.drawn)))return b=new THREE.Geometry,b.colors.push(this.source.faction.lineColor),b.vertices.push(this.source.sceneObject.position),b.colors.push(this.destination.faction.lineColor),b.vertices.push(this.destination.sceneObject.position),this.setDrawn(),a instanceof SCMAP.JumpPoint&&a.setDrawn(),b.computeLineDistances(),new THREE.Line(b,this.getMaterial(),THREE.LinePieces)},getOppositeJumppoint:function(){for(var a=0;a<this.destination.jumpPoints.length;a++){var b=this.destination.jumpPoints[a];if(b.destination==this.source)return b}},getMaterial:function(){return 2===this.typeId?SCMAP.JumpPoint.Material.Undiscovered:4===this.typeId?SCMAP.JumpPoint.Material.Possible:SCMAP.JumpPoint.Material.Regular},isValid:function(){return this.source instanceof SCMAP.System&&this.destination instanceof SCMAP.System&&this.source!==this.destination},isUnconfirmed:function(){return 2===this.typeId||4===this.typeId},setDrawn:function(){this.drawn=!0}},SCMAP.JumpPoint.Material={},SCMAP.JumpPoint.Material.Regular=new THREE.LineBasicMaterial({color:16777215,linewidth:2,vertexColors:!0}),SCMAP.JumpPoint.Material.Undiscovered=new THREE.LineDashedMaterial({color:16777215,dashSize:.75,gapSize:.75,linewidth:2,vertexColors:!0}),SCMAP.JumpPoint.Material.Possible=new THREE.LineDashedMaterial({color:16777215,dashSize:2,gapSize:2,linewidth:2,vertexColors:!0}),SCMAP.Faction=function(a){this.id=void 0,this.name="Unclaimed",this.shortName="NONE",this.isRealFaction=!1,this.color=new THREE.Color(16777215),this.planeColor=new THREE.Color(16711680),this.lineColor=new THREE.Color(16776960),this.setValues(a),this._claimed={systems:{}},this._darkMaterial=void 0},SCMAP.Faction.prototype={constructor:SCMAP.Faction,claim:function(a){return!a instanceof SCMAP.System?(new Error("A faction can only claim ownership over a system"),void 0):(this._claimed.systems[a.uuid]=!0,this)},claimed:function(a){return!a instanceof SCMAP.System?(new Error("A faction can only test ownership over a system"),void 0):this._claimed.systems[a.uuid]},material:function(){return"undefined"==typeof this._darkMaterial&&(this._darkMaterial=new THREE.MeshBasicMaterial({color:this.planeColor,vertexColors:!0})),this._darkMaterial},isHostileTo:function(a){if(!(a instanceof SCMAP.Faction))throw"Can only compare to other factions";return"Vanduul"===a.name?"Vanduul"!==this.name:"Vanduul"===this.name},getValue:function(a){if(void 0!==a){var b=this[a];return b}},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0!==c){if(b in this){var d=this[b];d instanceof THREE.Color?(c instanceof THREE.Color?this[b]=c:(c=c.replace("0x","#"),this[b]=new THREE.Color(c)),"color"===b&&(this.planeColor=this[b].clone().offsetHSL(0,.5,0).multiplyScalar(.2),this.lineColor=this[b].clone().offsetHSL(0,.05,-.05))):this[b]=c}}else console.log('SCMAP.Faction: "'+b+'" parameter is undefined for "'+this.name+'"')}}},SCMAP.Faction.preprocessFactions=function(){var a,b;SCMAP.data.factionsByName={};for(a in SCMAP.data.factions)b=SCMAP.data.factions[a],b instanceof SCMAP.Faction?(SCMAP.data.factionsByName[b.name]=b,SCMAP.data.factionsByName[b.shortName]=b):(b=new SCMAP.Faction({id:a,name:b.name,shortName:b.short_name,color:b.color,isRealFaction:b.is_real_faction}),SCMAP.data.factions[a]=b,SCMAP.data.factionsByName[b.name]=b,SCMAP.data.factionsByName[b.shortName]=b)},SCMAP.Faction.getById=function(a){var b=SCMAP.data.factions[a];return b instanceof SCMAP.Faction||(b=SCMAP.data.factionsByName.Unclaimed),b},SCMAP.Faction.getByName=function(a){var b=SCMAP.data.factionsByName[a];return b instanceof SCMAP.Faction||(b=SCMAP.data.factionsByName.Unclaimed),b},SCMAP.Goods=function(a){this.id=void 0,this.name="Unknown",this.isBlackMarket=!1,this.setValues(a),this._trade={importing:[],exporting:[],blackMarket:[]}},SCMAP.Goods.prototype={constructor:SCMAP.Goods,getValue:function(a){if(void 0!==a){var b=this[a];return b}},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0!==c){if(b in this){{this[b]}this[b]=c}}else console.log('SCMAP.Goods: "'+b+'" parameter is undefined for "'+this.name+'"')}}},SCMAP.Goods.preprocessGoods=function(){var a,b;SCMAP.data.goodsByName={};for(a in SCMAP.data.goods)b=SCMAP.data.goods[a],b instanceof SCMAP.Goods?SCMAP.data.goodsByName[b.name]=b:(b=new SCMAP.Goods({id:a,name:b.name,isBlackMarket:b.black_market}),SCMAP.data.goods[a]=b,SCMAP.data.goodsByName[b.name]=b)},SCMAP.Goods.getById=function(a){return SCMAP.data.goods[a]},SCMAP.Goods.getByName=function(a){return SCMAP.data.goodsByName[a]},SCMAP.System=function(a){this.id=void 0,this.uuid=void 0,this.name="",this.nickname="",this.position=new THREE.Vector3,this.faction=new SCMAP.Faction,this.size="medium",this.jumpPoints=[],this.starColor=new THREE.Color(16777215),this.source=void 0,this.planets=0,this.planetaryRotation=[],this.import=[],this.export=[],this.crimeStatus="",this.blackMarket=[],this.ueeStrategicValue=void 0,this.blob=[],this.scale=1,this.binary=!1,this.setValues(a),this._routeObjects=[],this._drawnText="",this._drawnSymbols=""},SCMAP.System.prototype={constructor:SCMAP.System,buildSceneObject:function(){var a,b,c,d,e,f;for(this.sceneObject=new THREE.Object3D,a=new THREE.Mesh(SCMAP.System.CUBE,SCMAP.System.CUBE_MATERIAL),a.visible=!1,f=Math.min(5.75,Math.max(3.5,5*this.scale)),a.scale.set(f,f,f),this.sceneObject.add(a),e=new THREE.LOD,i=0;i<SCMAP.System.LODMESH.length;i++)a=new THREE.Mesh(SCMAP.System.LODMESH[i][0],this.starMaterial()),a.scale.set(this.scale,this.scale,this.scale),a.updateMatrix(),a.matrixAutoUpdate=!1,e.addLevel(a,SCMAP.System.LODMESH[i][1]);return e.updateMatrix(),e.matrixAutoUpdate=!1,this.sceneObject.add(e),c=new THREE.Sprite(this.glowMaterial()),c.scale.set(SCMAP.System.GLOW_SCALE*this.scale,SCMAP.System.GLOW_SCALE*this.scale,1),c.isGlow=!0,c.sortParticles=!0,c.visible=SCMAP.settings.glow,this.sceneObject.add(c),b=new THREE.Sprite(this.labelSprite(SCMAP.settings.labelIcons)),b.position.set(0,3.5,0),b.position.set(0,3*this.scale,0),b.scale.set(SCMAP.System.LABEL_SCALE*b.material.map.image.width,SCMAP.System.LABEL_SCALE*b.material.map.image.height,1),b.isLabel=!0,b.sortParticles=!0,b.visible=SCMAP.settings.labels,this.sceneObject.add(b),d=this.position.clone(),storage&&"2d"===storage.mode&&d.setY(.005*d.y),this.sceneObject.position=d,this.sceneObject.system=this,this.sceneObject.scaleY=this.scaleY,this.sceneObject},updateSceneObject:function(){for(var a=0;a<this.sceneObject.children.length;a++){var b=this.sceneObject.children[a];b.isLabel?(this.updateLabelSprite(b.material,SCMAP.settings.labelIcons),b.visible=SCMAP.settings.labels):b.isGlow&&(b.visible=SCMAP.settings.glow)}},setLabelScale:function(a){for(var b=0;b<this.sceneObject.children.length;b++)this.sceneObject.children[b].isLabel&&this.sceneObject.children[b].scale.copy(a)},starMaterial:function(){return SCMAP.System.STAR_MATERIAL_WHITE},glowMaterial:function(){var a=this.starColor;return a.equals(SCMAP.Color.BLACK)&&a.copy(SCMAP.Color.UNSET),new THREE.SpriteMaterial({map:SCMAP.System.GLOW_MAP,blending:THREE.AdditiveBlending,transparent:!1,useScreenCoordinates:!1,color:a})},labelSprite:function(a){var b,c,d,e=a?this.getIcons():[];return b=this.drawSystemText(this.name,e),c=new THREE.Texture(b),c.needsUpdate=!0,d=new THREE.SpriteMaterial({map:c,useScreenCoordinates:!1,blending:THREE.CustomBlending})},updateLabelSprite:function(a,b){var c,d,e=b?this.getIcons():[],f=this.iconsToKey(e);(this._drawnText!==this.name||this._drawnSymbols!==f)&&(c=this.drawSystemText(this.name,e),d=new THREE.Texture(c),d.needsUpdate=!0,a.map=d)},drawSystemText:function(a,b){var c,d,e,f,g;for(c=document.createElement("canvas"),c.width=256,c.height=256,d=c.getContext("2d"),d.font="36pt Electrolize, Calibri, sans-serif",d.textAlign="center",d.strokeStyle="rgba(0,0,0,0.95)",d.lineWidth=5,e=Math.ceil(d.measureText(a).width+1);e>c.width;)c.width*=2,c.height*=2;return f=c.width/2,g=c.height/2,d.font="36pt Electrolize, Calibri, sans-serif",d.strokeStyle="rgba(0,0,0,0.95)",d.textAlign="center",d.lineWidth=5,d.strokeText(a,f,g),d.fillStyle=this.faction.color.getStyle(),d.fillText(a,f,g),this._drawnText=a,this._drawnSymbols="",b&&b.length&&(this._drawnSymbols=this.iconsToKey(b),this._drawSymbols(d,f,g-50,b)),c},_drawSymbols:function(a,b,c,d){var e,f,g,h,i=SCMAP.Symbol.SIZE*d.length+SCMAP.Symbol.SPACING*(d.length-1);for(b-=i/2,e=0;e<d.length;e++)f=d[e],g=0,h=0,f.offset&&(g=f.offset.x,h=f.offset.y),a.font=(SCMAP.Symbol.SIZE*f.scale).toFixed(1)+"pt FontAwesome",a.strokeStyle="rgba(0,0,0,0.95)",a.textAlign="center",a.lineWidth=5,a.strokeText(f.code,b+g+SCMAP.Symbol.SIZE/2,c+h),a.fillStyle=f.color,a.fillText(f.code,b+g+SCMAP.Symbol.SIZE/2,c+h),b+=SCMAP.Symbol.SIZE+SCMAP.Symbol.SPACING},createInfoLink:function(a){var b=$("<a></a>");if("undefined"!=typeof this.faction&&"undefined"!=typeof this.faction&&b.css("color",this.faction.color.getStyle()),b.addClass("system-link"),b.attr("data-goto","system"),b.attr("data-system",this.id),b.attr("href","#system="+encodeURI(this.name)),b.attr("title","Show information on "+this.name),b.html('<i class="fa fa-crosshairs"></i>&nbsp;'+this.name),!a){var c=this.getIcons();if(c.length){for(var d=$('<span class="icons"></span>'),e=0;e<c.length;e++)d.append(SCMAP.Symbol.getTag(c[e]));b.append(d)}}return b},iconsToKey:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].code);return b.join(";")},getIcons:function(){var a=[];return this.faction.isHostileTo(SCMAP.usersFaction())&&a.push(SCMAP.Symbols.DANGER),this.hasWarning()&&a.push(SCMAP.Symbols.WARNING),this.hasHangar()&&a.push(SCMAP.Symbols.HANGAR),this.blob.length&&a.push(SCMAP.Symbols.INFO),this.isMajorTradeHub()&&a.push(SCMAP.Symbols.TRADE),this.isOffLimits()&&a.push(SCMAP.Symbols.BANNED),this.hasComments()&&a.push(SCMAP.Symbols.COMMENTS),this.isBookmarked()&&a.push(SCMAP.Symbols.BOOKMARK),a},displayInfo:function(a){var b="(No information)",c="&mdash;",d="&mdash;",e="&mdash;",f="Unknown",g="Unknown",h=$('<div class="sc_system_info" '+makeSafeForCSS(this.name)+'"></div>'),i=window.map.indexOfCurrentRoute(this);if($("#systemname").attr("class",makeSafeForCSS(this.faction.name)).css("color",this.faction.color.getStyle()).text("System: "+this.name),"string"==typeof this.nickname&&this.nickname.length?$("#systemnickname").text(this.nickname).show():$("#systemnickname").text("").hide(),"number"==typeof i){var j=window.map.currentRoute(),k=[];if(i>0){var l=j[i-1].system.createInfoLink();l.attr("title","Previous jump to "+j[i-1].system.name+" ("+j[i-1].system.faction.name+" territory)"),l.empty().append('<i class="left fa fa-fw fa-arrow-left"></i>'),k.push(l)}else k.push($('<i class="left fa fa-fw"></i>'));if(i<j.length-1){var m=j[i+1].system.createInfoLink();m.attr("title","Next jump to "+j[i+1].system.name+" ("+j[i+1].system.faction.name+" territory)"),m.empty().append('<i class="right fa fa-fw fa-arrow-right"></i>'),k.push(m)}else k.push($('<i class="right fa fa-fw"></i>'));k.push(this.name),$("#systemname").empty().attr("class",makeSafeForCSS(this.faction.name)).append(k)}if(this.planetaryRotation.length&&(b=this.planetaryRotation.join(", ")),this.import.length&&(c=$.map(this.import,function(a){return SCMAP.data.goods[a].name}).join(", ")),this.export.length&&(d=$.map(this.export,function(a){return SCMAP.data.goods[a].name}).join(", ")),this.blackMarket.length&&(e=$.map(this.blackMarket,function(a){return SCMAP.data.goods[a].name}).join(", ")),"object"==typeof this.crimeStatus&&(g=this.crimeStatus.name),"object"==typeof this.ueeStrategicValue&&(f=this.ueeStrategicValue.color),$("dl.basic-system dd.faction").text(this.faction.name),$("dl.basic-system dd.rotation").html(b),$("dl.basic-system dd.import").html(c),$("dl.basic-system dd.export").html(d),$("dl.basic-system dd.blackMarket").html(e),$("dl.basic-system dt.crime").addClass("crime_"+g.toLowerCase()),$("dl.basic-system dd.crime").text(g),$("dl.basic-system dt.strategic").addClass("strategic_value_"+f.toLowerCase()),$("dl.basic-system dd.strategic").text(f),"Unclaimed"!==this.faction.name&&$("dl.basic-system dd.faction").css("color",this.faction.color.getStyle()),$("#hangar-location").prop("checked",this.hasHangar()).attr("data-system",this.id),$("#bookmark").prop("checked",this.isBookmarked()).attr("data-system",this.id),storage&&storage["comments."+this.id]){$("#comments").empty().val(storage["comments."+this.id]);var n=$(markdown.toHTML(storage["comments."+this.id]));$("#comments-md").html(n)}else $("#comments").empty().val(""),$("#comments-md").empty();if($("#comments").data("system",this.id),$("#bookmark").data("system",this.id),$("#hangar-location").data("system",this.id),this.blob.length){var o=$(markdown.toHTML(this.blob));o.find("p").prepend('<i class="fa fa-2x fa-quote-left"></i>'),h.append('<div id="systemInfo">',o,"</div>"),$("#system-background-info").show()}else $("#system-background-info").hide();this.source&&h.append('<p><a class="system-source-url" href="'+this.source+'" target="_blank">(source)</a></p>'),$("#systemblurb").empty(),$("#systemblurb").append(h),$("#map_ui #system-selected").show(),$("#map_ui #system-not-selected").hide(),a||($("#map_ui").tabs("option","active",2),$("#map_ui").data("jsp").reinitialise(),$("#map_ui").data("jsp").scrollToPercentY(0))
},scaleY:function(a){var b=this.system.position.y*(a/100);this.system.sceneObject.translateY(b-this.system.sceneObject.position.y);for(var c=0;c<this.system._routeObjects.length;c++)this.system._routeObjects[c].geometry.verticesNeedUpdate=!0},moveTo:function(a){this.sceneObject.position.copy(a);for(var b=0;b<this._routeObjects.length;b++)this._routeObjects[b].geometry.verticesNeedUpdate=!0},translateVector:function(a){this.sceneObject.add(a);for(var b=0;b<this._routeObjects.length;b++)this._routeObjects[b].geometry.verticesNeedUpdate=!0},jumpPointTo:function(a){for(var b=0;b<this.jumpPoints.length;b++)if(this.jumpPoints[b].destination===a)return this.jumpPoints[b]},isBookmarked:function(){return storage&&"1"===storage["bookmarks."+this.id]},hasHangar:function(){return storage&&"1"===storage["hangarLocation."+this.id]},hasComments:function(){return storage&&storage["comments."+this.id]},isOffLimits:function(){return 90===this.id||97===this.id},hasWarning:function(){return 81===this.id||94===this.id},isMajorTradeHub:function(){return 82===this.id||95===this.id||80===this.id||102===this.id||100===this.id||108===this.id||96===this.id||85===this.id||83===this.id||106===this.id||15===this.id||84===this.id||88===this.id||19===this.id||92===this.id},getValue:function(a){if(void 0!==a){var b=this[a];return b}},setValues:function(a){var b,c,d;if(void 0!==a)for(b in a)if(d=a[b],void 0!==d){if(b in this){if(c=this[b],"size"==b){switch(d){case"dwarf":this.scale=.6;break;case"medium":this.scale=1;break;case"large":this.scale=1.25;break;case"giant":this.scale=1.6;break;case"binary":this.scale=1.6,this.binary=!0}this[b]=d}c instanceof THREE.Color?d instanceof THREE.Color?this[b]=d:(d=d.replace("0x","#"),this[b]=new THREE.Color(d)):c instanceof SCMAP.Faction?this[b]=d.claim(this):c instanceof THREE.Vector3&&d instanceof THREE.Vector3?c.copy(d):c instanceof THREE.Vector3?d instanceof THREE.Vector3?c.copy(d):d instanceof Array&&c.fromArray(d):this[b]=d}}else console.log('SCMAP.System: "'+b+'" parameter is undefined for "'+this.name+'"')}},SCMAP.System.preprocessSystems=function(){var a,b,c,d,e;SCMAP.data.systemsById={},SCMAP.System.List=[];for(b in SCMAP.data.systems)d=SCMAP.data.systems[b],d instanceof SCMAP.System?(SCMAP.data.systemsById[c.id]=d,SCMAP.data.systemsById[c.uuid]=d):(e=SCMAP.Faction.getById(d.faction_id),c=new SCMAP.System({id:d.system_id,uuid:d.uuid,name:b,position:d.coords,scale:d.scale||1,starColor:d.color,faction:e}),c.setValues({nickname:d.nickname,size:d.size,source:d.source,crimeStatus:SCMAP.data.crime_levels[d.crime_level_id],ueeStrategicValue:SCMAP.data.uee_strategic_values[""+d.uee_strategic_value_id],"import":d.import,"export":d.export,blackMarket:d.black_market,blob:d.blob,planets:0,planetaryRotation:[],jumpPoints:d.jumppoints}),SCMAP.data.systems[c.name]=c,SCMAP.data.systemsById[c.id]=c,SCMAP.data.systemsById[c.uuid]=c);for(b in SCMAP.data.systems)for(c=SCMAP.System.getByName(b),SCMAP.System.List.push(c),a=0;a<c.jumpPoints.length;a++)jumpPoint=c.jumpPoints[a],c.jumpPoints[a]=new SCMAP.JumpPoint({source:c,destination:SCMAP.System.getById(jumpPoint.destination),name:jumpPoint.name,typeId:jumpPoint.type_id,entryAU:jumpPoint.coords_au})},SCMAP.System.List=[],SCMAP.System.SortedList=function(){for(var a=[],b=SCMAP.System.List.length;b--;)a[b]=SCMAP.System.List[b];var c=a.sort(humanSort);return c},SCMAP.System.getByName=function(a){return SCMAP.data.systems[a]},SCMAP.System.getById=function(a){return SCMAP.data.systemsById[a]},SCMAP.Color={},SCMAP.Color.BLACK=new THREE.Color("black"),SCMAP.Color.UNSET=new THREE.Color(8429772),SCMAP.System.COLORS={RED:16736352,BLUE:6316287,WHITE:16777215,YELLOW:16777056,ORANGE:15790208,UNKNOWN:16777215},SCMAP.System.LABEL_SCALE=.06,SCMAP.System.GLOW_SCALE=6.5,SCMAP.System.CUBE=new THREE.CubeGeometry(1,1,1),SCMAP.System.LODMESH=[[new THREE.IcosahedronGeometry(1,3),20],[new THREE.IcosahedronGeometry(1,2),50],[new THREE.IcosahedronGeometry(1,1),150]],SCMAP.System.STAR_MATERIAL_WHITE=new THREE.MeshBasicMaterial({color:SCMAP.System.COLORS.WHITE,name:"STAR_MATERIAL_WHITE"}),SCMAP.System.CUBE_MATERIAL=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:0}),SCMAP.System.CUBE_MATERIAL.opacity=.3,SCMAP.System.CUBE_MATERIAL.transparent=!0,SCMAP.System.GLOW_MAP=new THREE.ImageUtils.loadTexture($("#gl-info").data("glow-image")),SCMAP.Dijkstra=function(a){if("object"!=typeof a||!Array.isArray(a))return console.error("No array specified to SCMAP.Dijkstra constructor!"),void 0;for(this._nodes=[],this._mapping={},i=a.length;i--;)this._nodes[i]={system:a[i],distance:Number.POSITIVE_INFINITY,previous:null},this._mapping[a[i].id]=this._nodes[i];this._result={}},SCMAP.Dijkstra.prototype={constructor:SCMAP.Dijkstra,buildGraph:function(a){var b,c,d,e,f,g,h,i=new Date;if("object"!=typeof a)throw"No parameters object given";if(!a.source instanceof SCMAP.System)throw"No source given";if(void 0!==a.destination&&!a.destination instanceof SCMAP.System)throw"Invalid destination given";if(("string"!=typeof priority||"fuel"!==priority)&&(priority="time"),a.source instanceof SCMAP.System){if(this._result.source instanceof SCMAP.System&&this._result.source===a.source&&this._result.priority===priority)return console.log("Reusing generated graph starting at",a.source.name),a.destination instanceof SCMAP.System&&(this._result.destination=a.destination),void 0;for(a.destination instanceof SCMAP.System?console.log("Building graph, starting at",a.source.name,"and ending at",a.destination.name):console.log("Building graph, starting at",a.source.name),this.destroyGraph(),this._result.source=a.source,this._result.destination=a.destination,c=0;c<this._nodes.length;c++)this._nodes[c].distance=Number.POSITIVE_INFINITY,this._nodes[c].previous=null;e=this._mapping[a.source.id],e.distance=0,e.previous=null,b=SCMAP.Dijkstra.quickSort(this._nodes);for(;b.length&&(e=b[0],b.splice(0,1),!isInfinite(e.distance));)for(c=0;c<e.system.jumpPoints.length;c++)f=e.system.jumpPoints[c],g=this._mapping[f.destination.id],f.isUnconfirmed()&&storage&&"1"===storage["route.avoidUnknownJumppoints"]||storage&&"1"===storage["route.avoidHostile"]&&!e.system.faction.isHostileTo(SCMAP.usersFaction())&&g.system.faction.isHostileTo(SCMAP.usersFaction())||storage&&"1"===storage["route.avoidOffLimits"]&&e.system.isOffLimits()||("time"===priority?(d=e.distance+f.jumpTime(),d+=null===e.previous?SCMAP.travelTimeAU(.35):SCMAP.travelTimeAU(.7)):d=e.distance+f.length(),storage&&"1"===storage["route.avoidHostile"]&&g.system.faction.isHostileTo(SCMAP.usersFaction())&&(d*=15),d<g.distance&&(g.distance=d,g.previous=e,b=SCMAP.Dijkstra.quickSort(b)));this._result.nodes=b,this._result.priority=priority,h=new Date,console.log("Graph building took "+(h.getTime()-i.getTime())+" msec")}},source:function(){var a=this._result.source;return a instanceof SCMAP.System?a:void 0},destination:function(){var a=this._result.destination;return a instanceof SCMAP.System?a:void 0},rebuildGraph:function(){var a=this._result.source,b=this._result.destination;return this.destroyGraph(),a instanceof SCMAP.System?(this.buildGraph({source:a,destination:b}),!0):void 0},destroyGraph:function(){this._result={}},routeArray:function(a){if(!(a instanceof SCMAP.System))return console.error("No or invalid destination specified."),void 0;if(this._result.nodes.length>0){for(var b=[],c=this._mapping[a.id],d={};null!==c;)d[c.system.name]=!0,b.push(c),c=c.previous;return b.reverse(),b}},constructRouteObject:function(a,b,c){var d,e,f;if(a instanceof SCMAP.System&&b instanceof SCMAP.System){if("function"!=typeof c)return console.error("Callback not given or not a function"),void 0;if(this.buildGraph({source:a,destination:b}),d=this.routeArray(b),"object"==typeof d&&Array.isArray(d)){for(f=new THREE.Object3D,e=0;e<d.length-1;e++)f.add(c(d[e+0].system,d[e+1].system));return f}}}},SCMAP.Dijkstra.quickSort=function(a){for(var b=[],c=a.length;c--;)b[c]=a[c];if(b.length<=1)return b;var d=[],e=[],f=Math.ceil(b.length/2)-1;for(f=b.splice(f,1)[0],c=0;c<b.length;c++)b[c].distance<=f.distance?d.push(b[c]):e.push(b[c]);var g=SCMAP.Dijkstra.quickSort(d),h=SCMAP.Dijkstra.quickSort(e);return g.push(f),g.concat(h)},SCMAP.Map=function(a){this.name="Star Citizen 'Verse",this.scene=a,this.goods={},this._selected=void 0,this._destination=void 0,this.group=void 0,this._interactables=[],this.referencePlane=void 0,this._selectorObject=this.createSelectorObject(),this.scene.add(this._selectorObject),this.canEdit=!1,$("#map_ui li.editor").hide(),this.preprocessScene(),this._graph=new SCMAP.Dijkstra(SCMAP.System.List),this._routeObject=void 0},SCMAP.Map.prototype={constructor:SCMAP.Map,createSelectorObject:function(){var a=new THREE.Mesh(SCMAP.SelectedSystemGeometry,new THREE.MeshBasicMaterial({color:13421772,transparent:!0,blending:THREE.AdditiveBlending}));return a.scale.set(4.2,4.2,4.2),a.visible=!1,a.systemPosition=new THREE.Vector3(0,0,0),a.scaleY=function(a){var b=this.systemPosition.y*(a/100);this.translateY(b-this.position.y)},a},updateSelectorObject:function(a){a instanceof SCMAP.System?(this._selectorObject.visible=!0,this._selectorObject.systemPosition.copy(a.position),this.moveSelectorTo(a),this._selected=a):(this._selectorObject.visible=!1,this._selected=void 0)},system:function(a){return SCMAP.System.getByName(a)},selected:function(){return this._selected},interactables:function(){return this._interactables},deselect:function(){this._selectorObject.visible=!1,this._selected=void 0,$("#system-selected").hide(),$("#system-not-selected").show()},animateSelector:function(){this._selectorObject.visible&&(this._selectorObject.rotation.y=200*THREE.Math.degToRad(25e-5*Date.now()))},updateSystems:function(){for(var a=0;a<SCMAP.System.List.length;a++)SCMAP.System.List[a].updateSceneObject(this.scene)},setAllLabelSizes:function(a){for(var b=0;b<SCMAP.System.List.length;b++){{SCMAP.System.List[b]}SCMAP.System.List[b].setLabelScale(a)}},moveSelectorTo:function(a){var b,c,d,e,f=this;if(!(f._selectorObject.visible&&f._selected instanceof SCMAP.System))return f._selectorObject.systemPosition.copy(a.position),f._selectorObject.position.copy(a.sceneObject.position),f._selectorObject.visible=!0,f._selected=a,void 0;c=a.sceneObject.position.clone();var g=new SCMAP.Dijkstra(SCMAP.System.List);g.buildGraph({source:f._selected,destination:a});var h=g.routeArray(a);if(h.length<=1)return f._selectorObject.systemPosition.copy(a.position),f._selectorObject.position.copy(a.sceneObject.position),f._selectorObject.visible=!0,f._selected=a,void 0;f._selectorObject.position.copy(f._selectorObject.position),d={x:f._selectorObject.position.x,y:f._selectorObject.position.y,z:f._selectorObject.position.z};var j=[];for(i=0;i<h.length-1;i++)e=h[i+1].system,b=new TWEEN.Tween(d).to({x:e.sceneObject.position.x,y:e.sceneObject.position.y,z:e.sceneObject.position.z},800/(h.length-1)).easing(TWEEN.Easing.Linear.None).onUpdate(function(){f._selectorObject.position.setX(this.x),f._selectorObject.position.setY(this.y),f._selectorObject.position.setZ(this.z)}),0==i&&(2==h.length?b.easing(TWEEN.Easing.Cubic.InOut):b.easing(TWEEN.Easing.Cubic.In)),i>0&&j[i-1].chain(b),i==h.length-2&&(b.easing(TWEEN.Easing.Cubic.Out),b.onComplete(function(){f._selectorObject.systemPosition.copy(e.position),f._selectorObject.position.copy(e.sceneObject.position),f._selected=a})),j.push(b);j[0].start()},handleSelection:function(a,b){if("object"==typeof b){var c=a.shiftKey||a.ctrlKey?!0:!1;"mousedown"===a.type?c?this._destination=b.object.parent.system:this.moveSelectorTo(b.object.parent.system):"mouseup"===a.type&&(window.editor.enabled||(c?this.updateRoute(b.object.parent.system):this._selected instanceof SCMAP.System&&b.object.parent.system instanceof SCMAP.System&&b.object.parent.system===this._selected&&(this.updateSelectorObject(b.object.parent.system),b.object.parent.system.displayInfo())))}},currentRoute:function(){return this._destination instanceof SCMAP.System?this._graph.routeArray(this._destination):[]},indexOfCurrentRoute:function(a){if(!(!a instanceof SCMAP.System)){var b,c=this.currentRoute();if(c.length)for(i=0;i<c.length;i++)if(c[i].system===a){b=i;break}return b}},rebuildCurrentRoute:function(){var a;this._routeObject&&scene.remove(this._routeObject),$("#routelist").empty(),this._graph.rebuildGraph()&&(console.log("have new graph"),a=this._graph.destination(),a&&(console.log("have existing destination, updating route"),this.updateRoute(a)))},destroyCurrentRoute:function(){this._routeObject&&scene.remove(this._routeObject),$("#routelist").empty()},updateRoute:function(a){var b,c,d,e,f,g=this;if(d=new THREE.MeshBasicMaterial({color:14496546}),d.opacity=.8,d.transparent=!0,this.destroyCurrentRoute(),this._routeObject=g._graph.constructRouteObject(g._selected,a,function(a,b){var c=g.createRouteMesh(a,b),e=new THREE.Mesh(c,d);return e.position=a.sceneObject.position.clone(),e.lookAt(b.sceneObject.position),e}),this._routeObject){if(this.scene.add(this._routeObject),this._destination=a,c=this._graph.routeArray(a),$("#routelist").empty(),c.length>1)for($("#routelist").append("<p>The shortest route from "+c[0].system.createInfoLink(!0).outerHtml()+" to "+c[c.length-1].system.createInfoLink(!0).outerHtml()+" along <strong>"+(c.length-1)+"</strong> jump points:</p>").append('<ol class="routelist"></ol>'),b=0;b<c.length;b++)e=c[b+0].system,f=$("<li></li>").append(e.createInfoLink()),$("#routelist ol").append(f);else $("#routelist").append('<p class="impossible">No route available to '+c[0].system.createInfoLink(!0).outerHtml()+" with your current settings</p>");$("#map_ui").tabs("option","active",3)}},createRouteMesh:function(a,b){var c,d=(2*Math.PI/16,a.sceneObject.position.distanceTo(b.sceneObject.position));return c=new THREE.CylinderGeometry(.6,.6,d,8,1,!0),c.applyMatrix((new THREE.Matrix4).makeTranslation(0,d/2,0)),c.applyMatrix((new THREE.Matrix4).makeRotationX(THREE.Math.degToRad(90))),c},createRouteMeshTwirl:function(a,b){var c,d,e,f=2*Math.PI/16,g=.5,h=.5,i=new THREE.Geometry,j=a.sceneObject.position.distanceTo(b.sceneObject.position),k=0;for(c=0;j>k;c+=f)d=h*Math.cos(c),e=0-h*Math.sin(c),i.vertices.push(new THREE.Vector3(d,e,k)),k+=g;return i},preprocessScene:function(){SCMAP.Faction.preprocessFactions(),SCMAP.Goods.preprocessGoods(),SCMAP.System.preprocessSystems()},populateScene:function(){var a,b,c,d,e,f,g,h=0;e=f=new Date;for(b in SCMAP.data.systems)a=SCMAP.System.getByName(b),sceneObject=a.buildSceneObject(),this.scene.add(sceneObject),this._interactables.push(sceneObject.children[0]),h++;for(b in SCMAP.data.systems)for(a=SCMAP.System.getByName(b),g=0;g<a.jumpPoints.length;g++)c=a.jumpPoints[g],d=c.buildSceneObject(),d instanceof THREE.Object3D&&(a._routeObjects.push(d),this.scene.add(d));e=new Date,console.log("Populating the scene (without ref plane) took "+(e.getTime()-f.getTime())+" msec"),$("#debug-systems").html(h+" systems loaded"),scene.add(this.buildReferenceGrid())},closestPOI:function(a){var b,c,d,e,f,g,h=1/0;for(e in SCMAP.data.systems)c=SCMAP.System.getByName(e),f=a.x-c.position.x,g=a.z-c.position.z,d=Math.sqrt(f*f+g*g),h>d&&(h=d,b=c);return[h,b]},closestFromArray:function(a,b){for(var c,d,e,f,g,h=1/0,i=0;i<b.length;i++)d=b[i],f=a.x-d.position.x,g=a.z-d.position.z,e=Math.sqrt(f*f+g*g),h>e&&(h=e,c=d);return[h,c]},withinApproxDistance:function(a,b){for(var c=[],d=0;d<SCMAP.System.List.length;d+=1){var e=SCMAP.System.List[d];e.position.x<a.x-b||e.position.x>a.x+b||e.position.z<a.z-b||e.position.z>a.z+b||c.push(e)}return c},furthestPOI:function(a){var b,c,d,e,f,g,h=0;for(e in SCMAP.data.systems)c=SCMAP.System.getByName[e],f=a.x-c.position.x,g=a.z-c.position.z,d=Math.sqrt(f*f+g*g),d>h&&(h=d,b=c);return[h,b]},referencePlaneTerritoryColor:function(){if(!(!this.referencePlane instanceof THREE.Object3D))for(var a=this.referencePlane.geometry,b=55,c=0;c<a.vertices.length;c++){var d=a.vertices[c],e=this.closestPOI(d),f=e[0],g=e[1];f>b&&(f=b);var h=(b-f)/b,i=g.faction.planeColor.clone();i.multiplyScalar(.8*h),a.colors[c]=i}},referencePlaneSolidColor:function(a){var b,c,d=this.referencePlane.geometry;if(!(!this.referencePlane instanceof THREE.Object3D))for(b=0;b<d.vertices.length;b++)c=d.vertices[b],d.colors[b]=a},pointAtPlane:function(a,b,c){return new THREE.Vector3(b*Math.cos(a),c,-b*Math.sin(a))},referencePlaneTerritoryColourMesh:function(a,b,c,d,e){var f,g;return f=new THREE.Geometry,f.vertices.push(this.pointAtPlane(b,d,-.04)),f.vertices.push(this.pointAtPlane(c,d,-.04)),f.vertices.push(this.pointAtPlane(c,e,-.04)),f.vertices.push(this.pointAtPlane(b,e,-.04)),f.faces.push(new THREE.Face3(2,1,0)),f.faces.push(new THREE.Face3(3,2,0)),g=new THREE.Mesh(f,a)},buildReferenceGrid:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=10,q=0,r=0,s=0,t=0,u={},v=new THREE.Geometry,w={},x={};for(g=h=new Date,a=0;a<SCMAP.System.List.length;a+=1)f=SCMAP.System.List[a].position,f.x<q&&(q=f.x-60),f.x>s&&(s=f.x+80),f.z<r&&(r=f.z-60),f.z>t&&(t=f.z+100);q=Math.floor(q/p)*p,r=Math.floor(r/p)*p,s=Math.floor(s/p)*p,t=Math.floor(t/p)*p;for(var y=r;t>=y;y+=p){w[y]={};for(var z=q;s>=z;z+=p){x[z]=!0;var A=new THREE.Vector3(z,0,y),B=this.withinApproxDistance(A,6.5*p);o=this.colorForVector(A,B,p),o!==SCMAP.Map.BLACK?(w[y][z]=o.getHexString(),void 0===u[w[y][z]]&&(u[w[y][z]]=o)):(w[y][z]=null,u[null]=SCMAP.Map.BLACK)}}var C=[];for(b in x)C.push(b);C.sort(function(a,b){return a-b}),x=C;var D=[];for(b in w)D.push(b);for(D.sort(function(a,b){return a-b}),a=1;a<D.length;a+=1){for(e=D[a],m=[],n=[],b=1;b<x.length;b+=1)d=x[b],i=Math.floor(Number(d)-p),j=Math.floor(Number(d)+p),vertexColor=w[e][d],(vertexColor!==w[e][i]&&w[e][i]||vertexColor!==w[e][j]&&w[e][j])&&(m.push(new THREE.Vector3(d,0,e)),n.push(u[vertexColor]));for(c=0;c<m.length-1;c++)v.vertices.push(m[c]),v.colors.push(n[c]),v.vertices.push(m[c+1]),v.colors.push(n[c+1])}for(a=1;a<x.length;a+=1){for(d=x[a],m=[],n=[],b=1;b<D.length;b+=1)e=D[b],k=Math.floor(Number(e)-p),l=Math.floor(Number(e)+p),vertexColor=w[e][d],(w[k]&&w[k][d]&&vertexColor!==w[k][d]||w[l]&&w[l][d]&&vertexColor!==w[l][d])&&(m.push(new THREE.Vector3(d,0,e)),n.push(u[vertexColor]));for(c=0;c<m.length-1;c++)v.vertices.push(m[c]),v.colors.push(n[c]),v.vertices.push(m[c+1]),v.colors.push(n[c+1])}var E=new THREE.Line(v,new THREE.LineBasicMaterial({linewidth:1.5,wireframe:!0,vertexColors:THREE.VertexColors}),THREE.LinePieces);return g=new Date,console.log("Building the grid reference plane took "+(g.getTime()-h.getTime())+" msec"),E},colorForVector:function(a,b,c){var d=SCMAP.Map.BLACK,e=this.closestFromArray(a,b);return e[0]<=4.5*c&&e[1]&&(d=e[1].faction.planeColor.clone(),e[0]>=4*c?d.multiplyScalar(.5):e[0]>=3*c&&d.multiplyScalar(.8)),d},buildOldReferencePlane:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=10,x=2*Math.PI/36,y=new THREE.Object3D;r=s=new Date,q=this.furthestPOI(new THREE.Vector3),p=q[0]+50,d=new THREE.LineBasicMaterial({color:6316192,linewidth:1.5,vertexColors:!0,opacity:.6}),f=new THREE.Geometry;for(g=x/2;g<2*Math.PI;g+=x)for(j=Math.cos(g),k=Math.sin(g),t=g-x/2,u=g+x/2,h=Math.cos(t),i=Math.sin(t),a=w/2;p>a;a+=w)b=a-w/2,c=a+w/2,q=this.closestPOI(new THREE.Vector3(a*j,0,-a*k)),q[0]<=35,q[0]<55&&(l=b*h,m=-b*i,n=c*h,o=-c*i,f.vertices.push(new THREE.Vector3(l,0,m)),f.vertices.push(new THREE.Vector3(n,0,o)),f.vertices.push(new THREE.Vector3(l,0,m)),f.vertices.push(new THREE.Vector3(b*Math.cos(u),0,-b*Math.sin(u))));for(v=0;v<f.vertices.length;v++)f.colors[v]=d.color;e=new THREE.Line(f,d,THREE.LinePieces),this.referencePlane=e,scene.add(e),scene.add(y),r=new Date,console.log("Building the territory reference plane took "+(r.getTime()-s.getTime())+" msec")}},SCMAP.Map.BLACK=new THREE.Color(0),SCMAP.OrbitControls=function(a,b){function c(){return Math.pow(.95,s.zoomSpeed)}function d(a){s.enabled!==!1&&(s.requireAlt!==!0||a.altKey!==!1)&&(a.preventDefault(),u.starttouch(a),s.domElement.addEventListener("mousemove",e,!1),s.domElement.addEventListener("mouseup",f,!1))}function e(a){if(s.enabled!==!1&&(s.requireAlt!==!0||a.altKey!==!1)){a.preventDefault();var b=s.domElement===document?s.domElement.body:s.domElement;if("touch"===u.current)0===a.button?u.touchtorotate(a):1===a.button?u.touchtodolly(a):2===a.button&&u.touchtopan(a);else if("drag"===u.current){if(l){var c=s.getIntersect(a);c&&c.object.parent.system&&c.object.parent.system!==l?m&&m===c.object.parent.system||(m=c.object.parent.system,s.map.updateRoute(m),s.debug&&console.log('Intermediate object while dragging is "'+m.name+'"')):m=void 0}}else if("rotate"===u.current){if(s.noRotate===!0)return;x.set(a.clientX,a.clientY),y.subVectors(x,w),s.rotateLeft(2*Math.PI*y.x/b.clientWidth*s.rotateSpeed),s.rotateUp(2*Math.PI*y.y/b.clientHeight*s.rotateSpeed),w.copy(x)}else if("dolly"===u.current){if(s.noZoom===!0)return;D.set(a.clientX,a.clientY),E.subVectors(D,C),E.y>0?s.dollyIn():s.dollyOut(),C.copy(D)}else if("pan"===u.current){if(s.noPan===!0)return;A.set(a.clientX,a.clientY),B.subVectors(A,z),s.pan(B),z.copy(A)}s.update()}}function f(a){s.enabled!==!1&&(s.requireAlt!==!0||a.altKey!==!1)&&(s.domElement.removeEventListener("mousemove",e,!1),s.domElement.removeEventListener("mouseup",f,!1),u.idle(a))}function g(a){if(s.enabled!==!1&&s.noZoom!==!0&&(s.requireAlt!==!0||a.altKey!==!1)){var b=0;a.deltaY?b=a.deltaY:a.wheelDelta?b=a.wheelDelta:a.detail&&(b=-a.detail),b>0?s.dollyOut():s.dollyIn()}}function h(a){if(s.enabled!==!1&&s.noKeys!==!0&&s.noPan!==!0&&(s.requireAlt!==!0||a.altKey!==!1)){var b=$(document.activeElement);if("comments"===b.attr("id"))return(a.keyCode==s.keys.ESCAPE||a.keyCode==s.keys.TAB)&&b.blur(),void 0;var c=!1;switch(a.keyCode){case s.keys.UP:s.pan(new THREE.Vector2(0,s.keyPanSpeed)),c=!0;break;case s.keys.BOTTOM:s.pan(new THREE.Vector2(0,-s.keyPanSpeed)),c=!0;break;case s.keys.LEFT:s.pan(new THREE.Vector2(s.keyPanSpeed,0)),c=!0;break;case s.keys.RIGHT:s.pan(new THREE.Vector2(-s.keyPanSpeed,0)),c=!0;break;case s.keys.ESCAPE:s.map.deselect();break;case s.keys.TAB:break;case s.keys.R:s.rotateTo(cameraDefaults.theta,cameraDefaults.phi,cameraDefaults.radius);break;case s.keys.C:s.moveTo(cameraDefaults.target);break;case s.keys.T:s.rotateTo(0,0,200);break;case s.keys["2"]:s.noRotate=!0,$("#lock-rotation").prop("checked",!0),displayState.to2d(),s.rotateTo(0,0,180);break;case s.keys["3"]:displayState.to3d(),s.rotateTo(cameraDefaults.theta,cameraDefaults.phi,cameraDefaults.radius);break;case s.keys.L:$("#lock-rotation").click()}c&&s.update()}}function i(a){s.enabled!==!1&&s.requireAlt===!0&&a.altKey===!1}function j(a){s.enabled!==!1&&(s.requireAlt!==!0||a.altKey!==!1)&&(a.preventDefault(),a.stopPropagation())}function k(a){s.enabled!==!1&&u.idle(a)}this.object=a,this.domElement=void 0!==b?b:document,this.map=void 0,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.mapMode=!1,this.requireAlt=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ESCAPE:27,R:82,C:67,T:84,2:50,3:51,L:76,SPACE:32,TAB:9},this.debug=!1;var l,m,n,o,p,q,r,s=this,t="15.0",u=StateMachine.create({initial:{state:"idle",event:"init",defer:!0},events:[{name:"starttouch",from:"idle",to:"touch"},{name:"touchtodrag",from:"touch",to:"drag"},{name:"touchtorotate",from:"touch",to:"rotate"},{name:"touchtodolly",from:"touch",to:"dolly"},{name:"touchtopan",from:"touch",to:"pan"},{name:"startdolly",from:"idle",to:"dolly"},{name:"startpan",from:"idle",to:"pan"},{name:"idle",from:["*"],to:"idle"}],callbacks:{onentertouch:function(a,b,c,d){if(s.enabled!==!1&&(s.requireAlt!==!0||d.altKey!==!1)){d.preventDefault(),s.debug&&console.log(a,": entered state",c,"from",b);var e;if(0===d.button){if(e=s.getIntersect(d),e&&e.object.parent.system)l=e.object.parent.system,s.debug&&console.log('Click at "'+e.object.parent.system.name+'"'),s.map.updateSelectorObject(l),l.displayInfo("doNotSwitch"),this.touchtodrag(d);else if(!s.noRotate){if(s.noRotate===!0)return;w.set(d.clientX,d.clientY),this.touchtorotate(d)}}else if(1===d.button){if(s.noZoom===!0)return;C.set(d.clientX,d.clientY),this.touchtodolly(d)}if(2===d.button||s.noRotate&&!e){if(s.noPan===!0)return;z.set(d.clientX,d.clientY),this.touchtopan(d)}}},onenteridle:function(a,b,c,d){if(s.debug&&console.log(a,": idling after",b),"drag"===b){var e=s.getIntersect(d);e&&e.object.parent.system&&(m=e.object.parent.system,s.map.selected()===m&&m.displayInfo(),s.debug&&console.log('Ended dragging at "'+e.object.parent.system.name+'"'))}l=void 0,m=void 0,s.debug&&console.log("idling ...")}}}),v=1e-6,w=new THREE.Vector2,x=new THREE.Vector2,y=new THREE.Vector2,z=new THREE.Vector2,A=new THREE.Vector2,B=new THREE.Vector2,C=new THREE.Vector2,D=new THREE.Vector2,E=new THREE.Vector2,F=0,G=0,H=1,I=new THREE.Vector3,J=new THREE.Vector3,K={type:"change"};this.stateMachine=function(){return u},this.showState=function(){window.jQuery&&window.jQuery("#debug-state")&&window.jQuery("#debug-state").text("State: "+u.current)},this.rotateLeft=function(a){void 0===a&&(a=getAutoRotationAngle()),G-=a},this.rotateUp=function(a){void 0===a&&(a=getAutoRotationAngle()),F-=a},this.panLeft=function(a){var b=new THREE.Vector3,c=this.object.matrix.elements;b.set(c[0],c[1],c[2]),b.multiplyScalar(-a),I.add(b)},this.panUp=function(a){if(this.mapMode)return this.panBack(a);var b=new THREE.Vector3,c=this.object.matrix.elements;b.set(c[4],c[5],c[6]),b.multiplyScalar(a),I.add(b)},this.panBack=function(a){var b=this.target.clone().setY(this.object.position.y),c=this.object.position.clone().sub(b).negate().setLength(a);I.add(c)},this.moveTo=function(a){var b,c=this,d=this.target.clone();if(a instanceof SCMAP.System)b=a.position.clone().setY(this.target.y);else{if(!(a instanceof THREE.Vector3))return;b=a.clone().setY(this.target.y)}a instanceof SCMAP.System&&c.map.updateSelectorObject(a),n&&n.stop(),n=new TWEEN.Tween(d).to({x:b.x,y:b.y,z:b.z},750).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){var a=new THREE.Vector3(this.x,this.y,this.z);c.goTo(a)}),n.onComplete(function(){n=void 0}),n.start()},this.getCurrentPosition=function(){var a={cameraX:this.object.position.x,cameraY:this.object.position.y,cameraZ:this.object.position.z,targetX:this.target.x,targetY:this.target.y,targetZ:this.target.z};return a},this.rememberCurrentPosition=function(){if(storage){var a=this.getCurrentPosition();storage["camera.x"]=a.cameraX,storage["camera.y"]=a.cameraY,storage["camera.z"]=a.cameraZ,storage["target.x"]=a.targetX,storage["target.y"]=a.targetY,storage["target.z"]=a.targetZ}},this.restoreOldPosition=function(){storage&&"undefined"!=typeof storage["camera.x"]&&(this.object.position.setX(Number(storage["camera.x"])),this.object.position.setY(Number(storage["camera.y"])),this.object.position.setZ(Number(storage["camera.z"])),this.target.setX(Number(storage["target.x"])),this.target.setY(Number(storage["target.y"])),this.target.setZ(Number(storage["target.z"])))},this.rotateTo=function(a,b,c){var d=this.objectVectorToTarget(),e=Math.atan2(d.x,d.z),f=Math.atan2(Math.sqrt(d.x*d.x+d.z*d.z),d.y),g={left:e,up:f,radius:d.length()};rotateLeft=g.left,rotateUp=g.up,o&&o.stop(),o=new TWEEN.Tween(g).to({left:a,up:b,radius:c},1e3).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){p=this.left,q=this.up,r=this.radius}),o.onComplete(function(){o=void 0,p=void 0,q=void 0,r=void 0}),o.start()},this.cameraTo=function(a,b,c,d){this.rotateTo(b,c,d),this.moveTo(a)},this.goTo=function(a){a=a.clone().setY(this.target.y),a.sub(this.target),I.add(a)},this.pan=function(a){var b=s.domElement===document?s.domElement.body:s.domElement;if(void 0!==s.object.fov){var c=s.objectVectorToTarget().length();c*=Math.tan(s.object.fov/2*Math.PI/180),s.panLeft(2*a.x*c/b.clientHeight),s.panUp(2*a.y*c/b.clientHeight)}else void 0!==s.object.top?(s.panLeft(a.x*(s.object.right-s.object.left)/b.clientWidth),s.panUp(a.y*(s.object.top-s.object.bottom)/b.clientHeight)):console.warn("WARNING: OrbitControlsFSM.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(a){void 0===a&&(a=c()),H/=a},this.dollyOut=function(a){void 0===a&&(a=c()),H*=a},this.getIntersect=function(a){if(s.map.interactables()){var b,c,d,e;return b=new THREE.Vector3(a.clientX/window.innerWidth*2-1,2*-(a.clientY/window.innerHeight)+1,.5),c=new THREE.Projector,c.unprojectVector(b,s.object),d=new THREE.Raycaster(s.object.position,b.sub(s.object.position).normalize()),e=d.intersectObjects(s.map.interactables()),e[0]}},this.objectVectorToTarget=function(){return this.object.position.clone().sub(this.target)},this.update=function(){var a=this.objectVectorToTarget();this.target.add(I);var b=Math.atan2(a.x,a.z),c=Math.atan2(Math.sqrt(a.x*a.x+a.z*a.z),a.y);b+=G,c+=F,void 0!==p&&(b=p),void 0!==q&&(c=q),c=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,c)),c=Math.max(v,Math.min(Math.PI-v,c));var d=a.length()*H;void 0!==r&&(d=r),$("#debug-angle").html("Camera heading: "+THREE.Math.radToDeg(b).toFixed(1)+"&deg;<br>Camera tilt: "+THREE.Math.radToDeg(c).toFixed(1)+"&deg;<br>Camera distance: "+d.toFixed(1));var e=d-20;e/=10,17>e?e=17:e>22&&(e=22),e.toFixed(1)!==t&&(this.map.setAllLabelSizes(new THREE.Vector3(e,e,1)),t=e.toFixed(1)),d=Math.max(this.minDistance,Math.min(this.maxDistance,d)),a.x=d*Math.sin(c)*Math.sin(b),a.y=d*Math.cos(c),a.z=d*Math.sin(c)*Math.cos(b),this.object.position.copy(this.target).add(a),this.object.lookAt(this.target),G=0,F=0,H=1,I.set(0,0,0),J.distanceTo(this.object.position)>0&&(this.dispatchEvent(K),J.copy(this.object.position)),this.showState(),this.rememberCurrentPosition()},u.init(),this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1),this.domElement.addEventListener("mousedown",d,!1),this.domElement.addEventListener("mousewheel",g,!1),this.domElement.addEventListener("DOMMouseScroll",g,!1),$(this.domElement).on("mousewheel",g),$(this.domElement).on("mouseenter",function(a){u.idle(a)}),window.addEventListener("keydown",h,!1),this.domElement.addEventListener("touchstart",i,!1),this.domElement.addEventListener("touchend",k,!1),this.domElement.addEventListener("touchmove",j,!1)},SCMAP.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);var effectFXAA,camera,scene,renderer,composer,map,dpr,shift,ctrl,alt,controls,editor,stats,displayState,storage,cameraDefaults={x:0,y:80,z:100,target:new THREE.Vector3(0,10,0),theta:0,phi:THREE.Math.degToRad(55.1),radius:122.2};$(function(){Detector.webgl||Detector.addGetWebGLMessage(),init(),animate()}),Object.values=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},jQuery.fn.outerHtml=function(){return jQuery("<div />").append(this.eq(0).clone()).html()};